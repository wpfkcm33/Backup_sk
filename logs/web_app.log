2025-05-30 22:35:13,232 [INFO] __main__:557 - Flask 애플리케이션 초기화 완료
2025-05-30 22:35:13,234 [INFO] werkzeug:97 - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-30 22:35:13,234 [INFO] werkzeug:97 - [33mPress CTRL+C to quit[0m
2025-05-30 22:35:26,216 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 22:35:26] "GET / HTTP/1.1" 200 -
2025-05-30 22:35:26,249 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 22:35:26] "GET /static/css/main.css HTTP/1.1" 200 -
2025-05-30 22:35:26,282 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 22:35:26] "GET /static/js/chartManager.js HTTP/1.1" 200 -
2025-05-30 22:35:26,285 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 22:35:26] "GET /static/js/dataManager.js HTTP/1.1" 200 -
2025-05-30 22:35:26,288 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 22:35:26] "GET /static/js/sessionHistory.js HTTP/1.1" 200 -
2025-05-30 22:35:26,288 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 22:35:26] "GET /static/js/uiController.js HTTP/1.1" 200 -
2025-05-30 22:35:26,289 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 22:35:26] "GET /static/js/modalManager.js HTTP/1.1" 200 -
2025-05-30 22:35:26,294 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 22:35:26] "GET /static/js/main.js HTTP/1.1" 200 -
2025-05-30 22:35:26,511 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 22:35:26] "GET /default/get_predefined_queries HTTP/1.1" 200 -
2025-05-30 22:35:26,540 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 22:35:26] "GET /favicon.ico HTTP/1.1" 200 -
2025-05-30 22:35:38,620 [INFO] llm_manager:83 - API 클라이언트 초기화 완료
2025-05-30 22:35:38,620 [INFO] llm_manager:33 - LLM 매니저 초기화 완료 - 모드: api
2025-05-30 22:35:38,620 [INFO] data_manager:42 - 데이터 로드 중... Rating_Test_Data.csv
2025-05-30 22:35:38,623 [INFO] data_manager:45 - CSV 데이터 로드 완료: 108 행, 12 열
2025-05-30 22:35:38,623 [INFO] data_manager:50 - 메타데이터 로드 중... metadata.json
2025-05-30 22:35:38,623 [INFO] data_manager:54 - 메타데이터 로드 완료
2025-05-30 22:35:38,623 [INFO] data_manager:80 - Oracle 데이터베이스 설정 중...
2025-05-30 22:35:38,672 [INFO] data_manager:89 - Oracle 데이터베이스 연결 성공
2025-05-30 22:35:38,672 [INFO] data_manager:38 - 데이터 관리자 초기화 완료
2025-05-30 22:35:38,672 [INFO] chart_generator:78 - 차트 생성기 초기화 완료
2025-05-30 22:35:38,672 [INFO] main:78 - 차트 생성 애플리케이션 초기화 완료
2025-05-30 22:35:38,672 [INFO] main:88 - SQL 처리 시작: '2024년 고객별 실적 데이터를 보여줘'
2025-05-30 22:35:38,672 [INFO] data_manager:111 - SQL 생성 중... 쿼리: '2024년 고객별 실적 데이터를 보여줘'
2025-05-30 22:35:38,682 [INFO] llm_manager:177 - API 요청 중... 엔드포인트: http://localhost:8000/v1/chat/completions
2025-05-30 22:35:43,674 [INFO] llm_manager:187 - API 응답 완료: 4.99초 소요
2025-05-30 22:35:43,674 [INFO] data_manager:167 - 여러 SQL 문장에서 첫 번째 문장만 사용합니다.
2025-05-30 22:35:43,674 [INFO] data_manager:177 - 검증 및 수정된 SQL 쿼리: SELECT Q.HIQ1_CUST_CD, Q.ACTUAL FROM HIQ1_C.QMS_RAT_YMQT_N Q WHERE Q.YM_QT = '202404' FETCH FIRST 1000 ROWS ONLY
2025-05-30 22:35:43,674 [INFO] data_manager:125 - SQL 생성 완료: SELECT Q.HIQ1_CUST_CD, Q.ACTUAL FROM HIQ1_C.QMS_RAT_YMQT_N Q WHERE Q.YM_QT = '202404' FETCH FIRST 1000 ROWS ONLY
2025-05-30 22:35:43,674 [INFO] data_manager:192 - SQL 실행 중: SELECT Q.HIQ1_CUST_CD, Q.ACTUAL FROM HIQ1_C.QMS_RAT_YMQT_N Q WHERE Q.YM_QT = '202404' FETCH FIRST 1000 ROWS ONLY
2025-05-30 22:35:44,748 [ERROR] data_manager:203 - SQL 실행 오류: (oracledb.exceptions.DatabaseError) ORA-01017: invalid username/password; logon denied
(Background on this error at: https://sqlalche.me/e/20/4xp6)
2025-05-30 22:35:44,749 [INFO] main:101 - SQL 처리 완료
2025-05-30 22:35:44,768 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 22:35:44] "POST /default/execute_predefined_query HTTP/1.1" 200 -
2025-05-30 22:35:56,726 [INFO] main:88 - SQL 처리 시작: '"expected rating"'
2025-05-30 22:35:56,726 [INFO] data_manager:111 - SQL 생성 중... 쿼리: '"expected rating"'
2025-05-30 22:35:56,729 [INFO] llm_manager:177 - API 요청 중... 엔드포인트: http://localhost:8000/v1/chat/completions
2025-05-30 22:36:00,652 [INFO] llm_manager:187 - API 응답 완료: 3.92초 소요
2025-05-30 22:36:00,652 [INFO] data_manager:125 - SQL 생성 완료: WITH LEGEND AS ( SELECT DISTINCT A.COMM_CD AS HIQ1_APP_CD, A.COMM_CD_NM AS HIQ1_APP_NM, B.PLAN_QUARTER FROM HCOB_COMM_CD_N A, HCOB_CAL B WHERE 1=1 AND A.COMM_CD_DIV = 'CUQ_00002' AND B.PLAN_QUARTER BETWEEN '202001' AND '202502' )SELECT L.HIQ1_APP_CD, L.HIQ1_APP_NM, L.PLAN_QUARTER, M.REVENUE_PORTION, M.PORTION, CASE WHEN L.PLAN_QUARTER > 202500 THEN 1.2 ELSE DECODE(M.PORTION,0,0,NVL(ROUND(M.REVENUE_PORTION / M.PORTION, 2),0)) END AS RATING FROM LEGEND L, ( SELECT HIQ1_APP_CD, YM_QT, SUM(REVENUE_PORTION) AS REVENUE_PORTION, SUM(DECODE(REVENUE,NULL,0,PORTION)) AS PORTION FROM ( SELECT A.HIQ1_APP_CD, A.YM_QT, A.REVENUE, ( ( ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT BETWEEN FN_GET_QUARTER_CALCULATION(A.YM_QT, -3) AND A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' AND A.HIQ1_CUST_CD = YMQT.HIQ1_CUST_CD AND A.HIQ1_APP_CD = YMQT.HIQ1_APP_CD ) + ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT = A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' AND A.HIQ1_CUST_CD = YMQT.HIQ1_CUST_CD AND A.HIQ1_APP_CD = YMQT.HIQ1_APP_CD ) ) / ( ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT BETWEEN FN_GET_QUARTER_CALCULATION(A.YM_QT, -3) AND A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' ) + ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT = A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' ) ) ) AS PORTION, ( ( ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT BETWEEN FN_GET_QUARTER_CALCULATION(A.YM_QT, -3) AND A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' AND A.HIQ1_CUST_CD = YMQT.HIQ1_CUST_CD AND A.HIQ1_APP_CD = YMQT.HIQ1_APP_CD ) + ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT = A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' AND A.HIQ1_CUST_CD = YMQT.HIQ1_CUST_CD AND A.HIQ1_APP_CD = YMQT.HIQ1_APP_CD ) ) / ( ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT BETWEEN FN_GET_QUARTER_CALCULATION(A.YM_QT, -3) AND A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' ) + ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT = A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' ) ) ) * REVENUE AS REVENUE_PORTION FROM QMS_RAT_YMQT_N A, QMS_RAT_CUST B WHERE 1=1 AND A.HIQ1_CUST_CD = B.HIQ1_CUST_CD AND A.HIQ1_APP_CD = B.HIQ1_APP_CD AND A.YM_QT BETWEEN '202001' AND '202502' ) MAIN WHERE 1=1 GROUP BY HIQ1_APP_CD, YM_QT ) M WHERE 1=1 AND L.HIQ1_APP_CD = M.HIQ1_APP_CD(+) AND L.PLAN_QUARTER = M.YM_QT(+) ORDER BY L.PLAN_QUARTER
2025-05-30 22:36:00,652 [INFO] data_manager:192 - SQL 실행 중: WITH LEGEND AS ( SELECT DISTINCT A.COMM_CD AS HIQ1_APP_CD, A.COMM_CD_NM AS HIQ1_APP_NM, B.PLAN_QUARTER FROM HCOB_COMM_CD_N A, HCOB_CAL B WHERE 1=1 AND A.COMM_CD_DIV = 'CUQ_00002' AND B.PLAN_QUARTER BETWEEN '202001' AND '202502' )SELECT L.HIQ1_APP_CD, L.HIQ1_APP_NM, L.PLAN_QUARTER, M.REVENUE_PORTION, M.PORTION, CASE WHEN L.PLAN_QUARTER > 202500 THEN 1.2 ELSE DECODE(M.PORTION,0,0,NVL(ROUND(M.REVENUE_PORTION / M.PORTION, 2),0)) END AS RATING FROM LEGEND L, ( SELECT HIQ1_APP_CD, YM_QT, SUM(REVENUE_PORTION) AS REVENUE_PORTION, SUM(DECODE(REVENUE,NULL,0,PORTION)) AS PORTION FROM ( SELECT A.HIQ1_APP_CD, A.YM_QT, A.REVENUE, ( ( ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT BETWEEN FN_GET_QUARTER_CALCULATION(A.YM_QT, -3) AND A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' AND A.HIQ1_CUST_CD = YMQT.HIQ1_CUST_CD AND A.HIQ1_APP_CD = YMQT.HIQ1_APP_CD ) + ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT = A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' AND A.HIQ1_CUST_CD = YMQT.HIQ1_CUST_CD AND A.HIQ1_APP_CD = YMQT.HIQ1_APP_CD ) ) / ( ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT BETWEEN FN_GET_QUARTER_CALCULATION(A.YM_QT, -3) AND A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' ) + ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT = A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' ) ) ) AS PORTION, ( ( ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT BETWEEN FN_GET_QUARTER_CALCULATION(A.YM_QT, -3) AND A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' AND A.HIQ1_CUST_CD = YMQT.HIQ1_CUST_CD AND A.HIQ1_APP_CD = YMQT.HIQ1_APP_CD ) + ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT = A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' AND A.HIQ1_CUST_CD = YMQT.HIQ1_CUST_CD AND A.HIQ1_APP_CD = YMQT.HIQ1_APP_CD ) ) / ( ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT BETWEEN FN_GET_QUARTER_CALCULATION(A.YM_QT, -3) AND A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' ) + ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT = A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' ) ) ) * REVENUE AS REVENUE_PORTION FROM QMS_RAT_YMQT_N A, QMS_RAT_CUST B WHERE 1=1 AND A.HIQ1_CUST_CD = B.HIQ1_CUST_CD AND A.HIQ1_APP_CD = B.HIQ1_APP_CD AND A.YM_QT BETWEEN '202001' AND '202502' ) MAIN WHERE 1=1 GROUP BY HIQ1_APP_CD, YM_QT ) M WHERE 1=1 AND L.HIQ1_APP_CD = M.HIQ1_APP_CD(+) AND L.PLAN_QUARTER = M.YM_QT(+) ORDER BY L.PLAN_QUARTER
2025-05-30 22:36:01,679 [ERROR] data_manager:203 - SQL 실행 오류: (oracledb.exceptions.DatabaseError) ORA-01017: invalid username/password; logon denied
(Background on this error at: https://sqlalche.me/e/20/4xp6)
2025-05-30 22:36:01,680 [INFO] main:101 - SQL 처리 완료
2025-05-30 22:36:01,681 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 22:36:01] "POST /default/execute_predefined_query HTTP/1.1" 200 -
2025-05-30 22:36:10,125 [INFO] main:88 - SQL 처리 시작: '2024년 고객별 실적 데이터를 보여줘'
2025-05-30 22:36:10,126 [INFO] data_manager:111 - SQL 생성 중... 쿼리: '2024년 고객별 실적 데이터를 보여줘'
2025-05-30 22:36:10,129 [INFO] llm_manager:177 - API 요청 중... 엔드포인트: http://localhost:8000/v1/chat/completions
2025-05-30 22:36:15,067 [INFO] llm_manager:187 - API 응답 완료: 4.94초 소요
2025-05-30 22:36:15,068 [INFO] data_manager:167 - 여러 SQL 문장에서 첫 번째 문장만 사용합니다.
2025-05-30 22:36:15,068 [INFO] data_manager:177 - 검증 및 수정된 SQL 쿼리: SELECT Q.HIQ1_CUST_CD, Q.ACTUAL FROM HIQ1_C.QMS_RAT_YMQT_N Q WHERE Q.YM_QT = '202404' FETCH FIRST 1000 ROWS ONLY
2025-05-30 22:36:15,068 [INFO] data_manager:125 - SQL 생성 완료: SELECT Q.HIQ1_CUST_CD, Q.ACTUAL FROM HIQ1_C.QMS_RAT_YMQT_N Q WHERE Q.YM_QT = '202404' FETCH FIRST 1000 ROWS ONLY
2025-05-30 22:36:15,068 [INFO] data_manager:192 - SQL 실행 중: SELECT Q.HIQ1_CUST_CD, Q.ACTUAL FROM HIQ1_C.QMS_RAT_YMQT_N Q WHERE Q.YM_QT = '202404' FETCH FIRST 1000 ROWS ONLY
2025-05-30 22:36:16,098 [ERROR] data_manager:203 - SQL 실행 오류: (oracledb.exceptions.DatabaseError) ORA-01017: invalid username/password; logon denied
(Background on this error at: https://sqlalche.me/e/20/4xp6)
2025-05-30 22:36:16,098 [INFO] main:101 - SQL 처리 완료
2025-05-30 22:36:16,101 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 22:36:16] "POST /default/execute_predefined_query HTTP/1.1" 200 -
2025-05-30 22:39:00,034 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 22:39:00] "GET /default/get_json_data/ HTTP/1.1" 200 -
2025-05-30 22:39:10,573 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 22:39:10] "GET /default/get_history HTTP/1.1" 200 -
2025-05-30 22:39:16,419 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 22:39:16] "[33mGET /default/get_files?folder=sql_results_1748612176 HTTP/1.1[0m" 404 -
2025-05-30 23:09:30,640 [INFO] __main__:619 - Flask 애플리케이션 초기화 완료
2025-05-30 23:09:30,641 [INFO] werkzeug:97 - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-30 23:09:30,641 [INFO] werkzeug:97 - [33mPress CTRL+C to quit[0m
2025-05-30 23:09:34,179 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:09:34] "GET / HTTP/1.1" 200 -
2025-05-30 23:09:34,205 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:09:34] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-05-30 23:09:34,246 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:09:34] "[36mGET /static/js/uiController.js HTTP/1.1[0m" 304 -
2025-05-30 23:09:34,249 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:09:34] "[36mGET /static/js/modalManager.js HTTP/1.1[0m" 304 -
2025-05-30 23:09:34,250 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:09:34] "[36mGET /static/js/dataManager.js HTTP/1.1[0m" 304 -
2025-05-30 23:09:34,251 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:09:34] "[36mGET /static/js/chartManager.js HTTP/1.1[0m" 304 -
2025-05-30 23:09:34,252 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:09:34] "[36mGET /static/js/sessionHistory.js HTTP/1.1[0m" 304 -
2025-05-30 23:09:34,253 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:09:34] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-05-30 23:09:34,333 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:09:34] "GET /default/get_predefined_queries HTTP/1.1" 200 -
2025-05-30 23:09:34,337 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:09:34] "[36mGET /favicon.ico HTTP/1.1[0m" 304 -
2025-05-30 23:09:35,518 [INFO] llm_manager:83 - API 클라이언트 초기화 완료
2025-05-30 23:09:35,519 [INFO] llm_manager:33 - LLM 매니저 초기화 완료 - 모드: api
2025-05-30 23:09:35,519 [INFO] data_manager:42 - 데이터 로드 중... Rating_Test_Data.csv
2025-05-30 23:09:35,521 [INFO] data_manager:45 - CSV 데이터 로드 완료: 108 행, 12 열
2025-05-30 23:09:35,521 [INFO] data_manager:50 - 메타데이터 로드 중... metadata.json
2025-05-30 23:09:35,521 [INFO] data_manager:54 - 메타데이터 로드 완료
2025-05-30 23:09:35,521 [INFO] data_manager:80 - Oracle 데이터베이스 설정 중...
2025-05-30 23:09:35,543 [INFO] data_manager:89 - Oracle 데이터베이스 연결 성공
2025-05-30 23:09:35,543 [INFO] data_manager:38 - 데이터 관리자 초기화 완료
2025-05-30 23:09:35,543 [INFO] chart_generator:78 - 차트 생성기 초기화 완료
2025-05-30 23:09:35,543 [INFO] main:78 - 차트 생성 애플리케이션 초기화 완료
2025-05-30 23:09:35,543 [INFO] main:119 - 미리 정의된 SQL 실행 시작: 'customer_performance_2024'
2025-05-30 23:09:35,543 [INFO] data_manager:192 - SQL 실행 중: 
                SELECT customer_id, customer_name, 
                       SUM(sales_amount) as total_sales,
                       COUNT(order_id) as order_count
                FROM customer_sales 
                WHERE YEAR(order_date) = 2024
                GROUP BY customer_id, customer_name
                ORDER BY total_sales DESC
            
2025-05-30 23:09:36,605 [ERROR] data_manager:203 - SQL 실행 오류: (oracledb.exceptions.DatabaseError) ORA-01017: invalid username/password; logon denied
(Background on this error at: https://sqlalche.me/e/20/4xp6)
2025-05-30 23:09:36,606 [INFO] main:130 - 미리 정의된 SQL 실행 완료: 'customer_performance_2024'
2025-05-30 23:09:36,606 [ERROR] main:170 - 미리 정의된 SQL 결과 저장 중 오류: name 'datetime' is not defined
2025-05-30 23:09:36,608 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:09:36] "POST /default/execute_predefined_query HTTP/1.1" 200 -
2025-05-30 23:13:52,272 [INFO] __main__:676 - Flask 애플리케이션 초기화 완료
2025-05-30 23:13:52,274 [INFO] werkzeug:97 - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-30 23:13:52,274 [INFO] werkzeug:97 - [33mPress CTRL+C to quit[0m
2025-05-30 23:13:55,985 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:13:55] "GET / HTTP/1.1" 200 -
2025-05-30 23:13:56,038 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:13:56] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-05-30 23:13:56,064 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:13:56] "[36mGET /static/js/modalManager.js HTTP/1.1[0m" 304 -
2025-05-30 23:13:56,065 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:13:56] "[36mGET /static/js/sessionHistory.js HTTP/1.1[0m" 304 -
2025-05-30 23:13:56,067 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:13:56] "[36mGET /static/js/uiController.js HTTP/1.1[0m" 304 -
2025-05-30 23:13:56,069 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:13:56] "[36mGET /static/js/chartManager.js HTTP/1.1[0m" 304 -
2025-05-30 23:13:56,070 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:13:56] "[36mGET /static/js/dataManager.js HTTP/1.1[0m" 304 -
2025-05-30 23:13:56,080 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:13:56] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-05-30 23:13:56,134 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:13:56] "GET /default/get_predefined_queries HTTP/1.1" 200 -
2025-05-30 23:13:56,139 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:13:56] "[36mGET /favicon.ico HTTP/1.1[0m" 304 -
2025-05-30 23:13:58,052 [INFO] llm_manager:83 - API 클라이언트 초기화 완료
2025-05-30 23:13:58,052 [INFO] llm_manager:33 - LLM 매니저 초기화 완료 - 모드: api
2025-05-30 23:13:58,052 [INFO] data_manager:42 - 데이터 로드 중... Rating_Test_Data.csv
2025-05-30 23:13:58,054 [INFO] data_manager:45 - CSV 데이터 로드 완료: 108 행, 12 열
2025-05-30 23:13:58,054 [INFO] data_manager:50 - 메타데이터 로드 중... metadata.json
2025-05-30 23:13:58,055 [INFO] data_manager:54 - 메타데이터 로드 완료
2025-05-30 23:13:58,055 [INFO] data_manager:80 - Oracle 데이터베이스 설정 중...
2025-05-30 23:13:58,076 [INFO] data_manager:89 - Oracle 데이터베이스 연결 성공
2025-05-30 23:13:58,076 [INFO] data_manager:38 - 데이터 관리자 초기화 완료
2025-05-30 23:13:58,076 [INFO] chart_generator:78 - 차트 생성기 초기화 완료
2025-05-30 23:13:58,076 [INFO] main:78 - 차트 생성 애플리케이션 초기화 완료
2025-05-30 23:13:58,076 [INFO] main:119 - 미리 정의된 SQL 실행 시작: 'actual_rating'
2025-05-30 23:13:58,076 [INFO] data_manager:192 - SQL 실행 중: 
                SELECT r.HIQ1_CUST_CD as customer_code,
                       CASE r.HIQ1_CUST_CD 
                           WHEN 'G113' THEN 'GOOGLE'
                           WHEN 'G150' THEN 'APPLE' 
                           WHEN 'G669' THEN 'AMD'
                           WHEN 'G932' THEN 'AMAZON'
                           WHEN 'G118' THEN 'HUAWEI'
                           WHEN 'G010' THEN 'HP INC'
                           WHEN 'G021' THEN 'ACER'
                           WHEN 'G163' THEN 'MICROSOFT'
                           WHEN 'G020' THEN 'DELL'
                           WHEN 'G959' THEN 'XIAOMI'
                           ELSE r.HIQ1_CUST_CD
                       END as customer_name,
                       r.HIQ1_APP_CD as app_type,
                       r.YM_QT as quarter,
                       r.ACTUAL as actual_rating,
                       r.SCORE as score,
                       r.EXPECTED_DATE as expected_date
                FROM QMS_RAT_YMQT_N r
                WHERE r.ACTUAL IS NOT NULL
                ORDER BY r.YM_QT DESC, TO_NUMBER(r.SCORE) DESC
            
2025-05-30 23:13:59,109 [ERROR] data_manager:203 - SQL 실행 오류: (oracledb.exceptions.DatabaseError) ORA-01017: invalid username/password; logon denied
(Background on this error at: https://sqlalche.me/e/20/4xp6)
2025-05-30 23:13:59,110 [INFO] main:130 - 미리 정의된 SQL 실행 완료: 'actual_rating'
2025-05-30 23:13:59,110 [ERROR] main:170 - 미리 정의된 SQL 결과 저장 중 오류: name 'datetime' is not defined
2025-05-30 23:13:59,111 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:13:59] "POST /default/execute_predefined_query HTTP/1.1" 200 -
2025-05-30 23:21:09,837 [INFO] __main__:676 - Flask 애플리케이션 초기화 완료
2025-05-30 23:21:09,839 [INFO] werkzeug:97 - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-30 23:21:09,839 [INFO] werkzeug:97 - [33mPress CTRL+C to quit[0m
2025-05-30 23:21:16,185 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:21:16] "GET / HTTP/1.1" 200 -
2025-05-30 23:21:16,238 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:21:16] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-05-30 23:21:16,277 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:21:16] "[36mGET /static/js/dataManager.js HTTP/1.1[0m" 304 -
2025-05-30 23:21:16,279 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:21:16] "[36mGET /static/js/chartManager.js HTTP/1.1[0m" 304 -
2025-05-30 23:21:16,281 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:21:16] "[36mGET /static/js/modalManager.js HTTP/1.1[0m" 304 -
2025-05-30 23:21:16,282 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:21:16] "[36mGET /static/js/sessionHistory.js HTTP/1.1[0m" 304 -
2025-05-30 23:21:16,283 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:21:16] "[36mGET /static/js/uiController.js HTTP/1.1[0m" 304 -
2025-05-30 23:21:16,290 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:21:16] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-05-30 23:21:16,367 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:21:16] "GET /default/get_predefined_queries HTTP/1.1" 200 -
2025-05-30 23:21:16,369 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:21:16] "[36mGET /favicon.ico HTTP/1.1[0m" 304 -
2025-05-30 23:21:18,429 [INFO] llm_manager:83 - API 클라이언트 초기화 완료
2025-05-30 23:21:18,429 [INFO] llm_manager:33 - LLM 매니저 초기화 완료 - 모드: api
2025-05-30 23:21:18,429 [INFO] data_manager:42 - 데이터 로드 중... Rating_Test_Data.csv
2025-05-30 23:21:18,432 [INFO] data_manager:45 - CSV 데이터 로드 완료: 108 행, 12 열
2025-05-30 23:21:18,432 [INFO] data_manager:50 - 메타데이터 로드 중... metadata.json
2025-05-30 23:21:18,432 [INFO] data_manager:54 - 메타데이터 로드 완료
2025-05-30 23:21:18,432 [INFO] data_manager:80 - Oracle 데이터베이스 설정 중...
2025-05-30 23:21:18,453 [INFO] data_manager:89 - Oracle 데이터베이스 연결 성공
2025-05-30 23:21:18,454 [INFO] data_manager:38 - 데이터 관리자 초기화 완료
2025-05-30 23:21:18,454 [INFO] chart_generator:78 - 차트 생성기 초기화 완료
2025-05-30 23:21:18,454 [INFO] main:78 - 차트 생성 애플리케이션 초기화 완료
2025-05-30 23:21:18,454 [INFO] main:119 - 미리 정의된 SQL 실행 시작: 'expected_rating'
2025-05-30 23:21:18,454 [INFO] data_manager:192 - SQL 실행 중: 
                SELECT r.HIQ1_CUST_CD as customer_code,
                       CASE r.HIQ1_CUST_CD 
                           WHEN 'G113' THEN 'GOOGLE'
                           WHEN 'G150' THEN 'APPLE' 
                           WHEN 'G669' THEN 'AMD'
                           WHEN 'G932' THEN 'AMAZON'
                           WHEN 'G118' THEN 'HUAWEI'
                           WHEN 'G010' THEN 'HP INC'
                           WHEN 'G021' THEN 'ACER'
                           WHEN 'G163' THEN 'MICROSOFT'
                           WHEN 'G020' THEN 'DELL'
                           WHEN 'G959' THEN 'XIAOMI'
                           ELSE r.HIQ1_CUST_CD
                       END as customer_name,
                       r.HIQ1_APP_CD as app_type,
                       r.YM_QT as quarter,
                       r.FORECAST as expected_rating,
                       r.REVENUE as revenue_rating,
                       r.EXPECTED_DATE as expected_date
                FROM QMS_RAT_YMQT_N r
                WHERE r.FORECAST IS NOT NULL
                ORDER BY r.EXPECTED_DATE DESC, r.YM_QT DESC
            
2025-05-30 23:21:18,668 [INFO] data_manager:200 - SQL 실행 완료: 48 행, 7 열
2025-05-30 23:21:18,668 [INFO] main:130 - 미리 정의된 SQL 실행 완료: 'expected_rating'
2025-05-30 23:21:18,668 [ERROR] main:170 - 미리 정의된 SQL 결과 저장 중 오류: name 'datetime' is not defined
2025-05-30 23:21:18,671 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:21:18] "POST /default/execute_predefined_query HTTP/1.1" 200 -
2025-05-30 23:21:40,871 [INFO] llm_manager:177 - API 요청 중... 엔드포인트: http://localhost:8000/v1/chat/completions
2025-05-30 23:21:46,737 [INFO] llm_manager:187 - API 응답 완료: 5.86초 소요
2025-05-30 23:21:46,737 [INFO] data_manager:192 - SQL 실행 중: WITH LEGEND AS ( SELECT DISTINCT A.COMM_CD AS HIQ1_APP_CD, A.COMM_CD_NM AS HIQ1_APP_NM, B.PLAN_QUARTER FROM HCOB_COMM_CD_N A, HCOB_CAL B WHERE 1=1 AND A.COMM_CD_DIV = 'CUQ_00002' AND B.PLAN_QUARTER BETWEEN '202001' AND '202502' )SELECT L.HIQ1_APP_CD, L.HIQ1_APP_NM, L.PLAN_QUARTER, M.REVENUE_PORTION, M.PORTION, CASE WHEN L.PLAN_QUARTER > 202500 THEN 1.2 ELSE DECODE(M.PORTION,0,0,NVL(ROUND(M.REVENUE_PORTION / M.PORTION, 2),0)) END AS RATING FROM LEGEND L, ( SELECT HIQ1_APP_CD, YM_QT, SUM(REVENUE_PORTION) AS REVENUE_PORTION, SUM(DECODE(REVENUE,NULL,0,PORTION)) AS PORTION FROM ( SELECT A.HIQ1_APP_CD, A.YM_QT, A.REVENUE, ( ( ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT BETWEEN FN_GET_QUARTER_CALCULATION(A.YM_QT, -3) AND A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' AND A.HIQ1_CUST_CD = YMQT.HIQ1_CUST_CD AND A.HIQ1_APP_CD = YMQT.HIQ1_APP_CD ) + ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT = A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' AND A.HIQ1_CUST_CD = YMQT.HIQ1_CUST_CD AND A.HIQ1_APP_CD = YMQT.HIQ1_APP_CD ) ) / ( ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT BETWEEN FN_GET_QUARTER_CALCULATION(A.YM_QT, -3) AND A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' ) + ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT = A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' ) ) ) AS PORTION, ( ( ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT BETWEEN FN_GET_QUARTER_CALCULATION(A.YM_QT, -3) AND A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' AND A.HIQ1_CUST_CD = YMQT.HIQ1_CUST_CD AND A.HIQ1_APP_CD = YMQT.HIQ1_APP_CD ) + ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT = A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' AND A.HIQ1_CUST_CD = YMQT.HIQ1_CUST_CD AND A.HIQ1_APP_CD = YMQT.HIQ1_APP_CD ) ) / ( ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT BETWEEN FN_GET_QUARTER_CALCULATION(A.YM_QT, -3) AND A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' ) + ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT = A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' ) ) ) * REVENUE AS REVENUE_PORTION FROM QMS_RAT_YMQT_N A, QMS_RAT_CUST B WHERE 1=1 AND A.HIQ1_CUST_CD = B.HIQ1_CUST_CD AND A.HIQ1_APP_CD = B.HIQ1_APP_CD AND A.YM_QT BETWEEN '202001' AND '202502' ) MAIN WHERE 1=1 GROUP BY HIQ1_APP_CD, YM_QT ) M WHERE 1=1 AND L.HIQ1_APP_CD = M.HIQ1_APP_CD(+) AND L.PLAN_QUARTER = M.YM_QT(+) ORDER BY L.PLAN_QUARTER
2025-05-30 23:21:46,743 [ERROR] data_manager:203 - SQL 실행 오류: (oracledb.exceptions.DatabaseError) ORA-00904: "A"."COMM_CD_NM": invalid identifier
[SQL: WITH LEGEND AS ( SELECT DISTINCT A.COMM_CD AS HIQ1_APP_CD, A.COMM_CD_NM AS HIQ1_APP_NM, B.PLAN_QUARTER FROM HCOB_COMM_CD_N A, HCOB_CAL B WHERE 1=1 AND A.COMM_CD_DIV = 'CUQ_00002' AND B.PLAN_QUARTER BETWEEN '202001' AND '202502' )SELECT L.HIQ1_APP_CD, L.HIQ1_APP_NM, L.PLAN_QUARTER, M.REVENUE_PORTION, M.PORTION, CASE WHEN L.PLAN_QUARTER > 202500 THEN 1.2 ELSE DECODE(M.PORTION,0,0,NVL(ROUND(M.REVENUE_PORTION / M.PORTION, 2),0)) END AS RATING FROM LEGEND L, ( SELECT HIQ1_APP_CD, YM_QT, SUM(REVENUE_PORTION) AS REVENUE_PORTION, SUM(DECODE(REVENUE,NULL,0,PORTION)) AS PORTION FROM ( SELECT A.HIQ1_APP_CD, A.YM_QT, A.REVENUE, ( ( ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT BETWEEN FN_GET_QUARTER_CALCULATION(A.YM_QT, -3) AND A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' AND A.HIQ1_CUST_CD = YMQT.HIQ1_CUST_CD AND A.HIQ1_APP_CD = YMQT.HIQ1_APP_CD ) + ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT = A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' AND A.HIQ1_CUST_CD = YMQT.HIQ1_CUST_CD AND A.HIQ1_APP_CD = YMQT.HIQ1_APP_CD ) ) / ( ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT BETWEEN FN_GET_QUARTER_CALCULATION(A.YM_QT, -3) AND A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' ) + ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT = A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' ) ) ) AS PORTION, ( ( ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT BETWEEN FN_GET_QUARTER_CALCULATION(A.YM_QT, -3) AND A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' AND A.HIQ1_CUST_CD = YMQT.HIQ1_CUST_CD AND A.HIQ1_APP_CD = YMQT.HIQ1_APP_CD ) + ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT = A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' AND A.HIQ1_CUST_CD = YMQT.HIQ1_CUST_CD AND A.HIQ1_APP_CD = YMQT.HIQ1_APP_CD ) ) / ( ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT BETWEEN FN_GET_QUARTER_CALCULATION(A.YM_QT, -3) AND A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' ) + ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT = A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' ) ) ) * REVENUE AS REVENUE_PORTION FROM QMS_RAT_YMQT_N A, QMS_RAT_CUST B WHERE 1=1 AND A.HIQ1_CUST_CD = B.HIQ1_CUST_CD AND A.HIQ1_APP_CD = B.HIQ1_APP_CD AND A.YM_QT BETWEEN '202001' AND '202502' ) MAIN WHERE 1=1 GROUP BY HIQ1_APP_CD, YM_QT ) M WHERE 1=1 AND L.HIQ1_APP_CD = M.HIQ1_APP_CD(+) AND L.PLAN_QUARTER = M.YM_QT(+) ORDER BY L.PLAN_QUARTER]
(Background on this error at: https://sqlalche.me/e/20/4xp6)
2025-05-30 23:21:46,745 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:21:46] "POST /default/modify_sql HTTP/1.1" 200 -
2025-05-30 23:23:42,951 [INFO] main:119 - 미리 정의된 SQL 실행 시작: 'customer_performance_2024'
2025-05-30 23:23:42,951 [INFO] data_manager:192 - SQL 실행 중: 
                SELECT g.HIQ1_CUST_CD as customer_code,
                       CASE g.HIQ1_CUST_CD 
                           WHEN 'G113' THEN 'GOOGLE'
                           WHEN 'G150' THEN 'APPLE' 
                           WHEN 'G669' THEN 'AMD'
                           WHEN 'G932' THEN 'AMAZON'
                           WHEN 'G118' THEN 'HUAWEI'
                           WHEN 'G010' THEN 'HP INC'
                           WHEN 'G021' THEN 'ACER'
                           WHEN 'G163' THEN 'MICROSOFT'
                           WHEN 'G020' THEN 'DELL'
                           WHEN 'G959' THEN 'XIAOMI'
                           ELSE g.HIQ1_CUST_CD
                       END as customer_name,
                       g.HIQ1_APP_CD as app_type,
                       g.AMT as performance_amount,
                       g.ACTUAL as actual_rating,
                       g.SCORE as performance_score,
                       g.PLAN_QUARTER as quarter
                FROM QMS_GBW_VIEW g
                WHERE g.PLAN_QUARTER LIKE '2024%'
                ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC
            
2025-05-30 23:23:42,960 [INFO] data_manager:200 - SQL 실행 완료: 21 행, 7 열
2025-05-30 23:23:42,960 [INFO] main:130 - 미리 정의된 SQL 실행 완료: 'customer_performance_2024'
2025-05-30 23:23:42,960 [ERROR] main:170 - 미리 정의된 SQL 결과 저장 중 오류: name 'datetime' is not defined
2025-05-30 23:23:42,962 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:23:42] "POST /default/execute_predefined_query HTTP/1.1" 200 -
2025-05-30 23:23:44,665 [INFO] main:119 - 미리 정의된 SQL 실행 시작: 'quarterly_amt_analysis'
2025-05-30 23:23:44,665 [INFO] data_manager:192 - SQL 실행 중: 
                SELECT g.PLAN_QUARTER as quarter,
                       g.HIQ1_APP_CD as app_type,
                       COUNT(*) as customer_count,
                       SUM(g.AMT) as total_amount,
                       AVG(g.AMT) as avg_amount,
                       MAX(g.AMT) as max_amount,
                       MIN(g.AMT) as min_amount,
                       ROUND(AVG(TO_NUMBER(g.SCORE)), 2) as avg_score
                FROM QMS_GBW_VIEW g
                WHERE g.AMT IS NOT NULL
                GROUP BY g.PLAN_QUARTER, g.HIQ1_APP_CD
                ORDER BY g.PLAN_QUARTER DESC, total_amount DESC
            
2025-05-30 23:23:44,714 [INFO] data_manager:200 - SQL 실행 완료: 6 행, 8 열
2025-05-30 23:23:44,714 [INFO] main:130 - 미리 정의된 SQL 실행 완료: 'quarterly_amt_analysis'
2025-05-30 23:23:44,714 [ERROR] main:170 - 미리 정의된 SQL 결과 저장 중 오류: name 'datetime' is not defined
2025-05-30 23:23:44,715 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:23:44] "POST /default/execute_predefined_query HTTP/1.1" 200 -
2025-05-30 23:23:48,735 [INFO] main:119 - 미리 정의된 SQL 실행 시작: 'customer_performance_2024'
2025-05-30 23:23:48,735 [INFO] data_manager:192 - SQL 실행 중: 
                SELECT g.HIQ1_CUST_CD as customer_code,
                       CASE g.HIQ1_CUST_CD 
                           WHEN 'G113' THEN 'GOOGLE'
                           WHEN 'G150' THEN 'APPLE' 
                           WHEN 'G669' THEN 'AMD'
                           WHEN 'G932' THEN 'AMAZON'
                           WHEN 'G118' THEN 'HUAWEI'
                           WHEN 'G010' THEN 'HP INC'
                           WHEN 'G021' THEN 'ACER'
                           WHEN 'G163' THEN 'MICROSOFT'
                           WHEN 'G020' THEN 'DELL'
                           WHEN 'G959' THEN 'XIAOMI'
                           ELSE g.HIQ1_CUST_CD
                       END as customer_name,
                       g.HIQ1_APP_CD as app_type,
                       g.AMT as performance_amount,
                       g.ACTUAL as actual_rating,
                       g.SCORE as performance_score,
                       g.PLAN_QUARTER as quarter
                FROM QMS_GBW_VIEW g
                WHERE g.PLAN_QUARTER LIKE '2024%'
                ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC
            
2025-05-30 23:23:48,738 [INFO] data_manager:200 - SQL 실행 완료: 21 행, 7 열
2025-05-30 23:23:48,738 [INFO] main:130 - 미리 정의된 SQL 실행 완료: 'customer_performance_2024'
2025-05-30 23:23:48,738 [ERROR] main:170 - 미리 정의된 SQL 결과 저장 중 오류: name 'datetime' is not defined
2025-05-30 23:23:48,739 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:23:48] "POST /default/execute_predefined_query HTTP/1.1" 200 -
2025-05-30 23:23:50,298 [INFO] main:119 - 미리 정의된 SQL 실행 시작: 'expected_rating'
2025-05-30 23:23:50,298 [INFO] data_manager:192 - SQL 실행 중: 
                SELECT r.HIQ1_CUST_CD as customer_code,
                       CASE r.HIQ1_CUST_CD 
                           WHEN 'G113' THEN 'GOOGLE'
                           WHEN 'G150' THEN 'APPLE' 
                           WHEN 'G669' THEN 'AMD'
                           WHEN 'G932' THEN 'AMAZON'
                           WHEN 'G118' THEN 'HUAWEI'
                           WHEN 'G010' THEN 'HP INC'
                           WHEN 'G021' THEN 'ACER'
                           WHEN 'G163' THEN 'MICROSOFT'
                           WHEN 'G020' THEN 'DELL'
                           WHEN 'G959' THEN 'XIAOMI'
                           ELSE r.HIQ1_CUST_CD
                       END as customer_name,
                       r.HIQ1_APP_CD as app_type,
                       r.YM_QT as quarter,
                       r.FORECAST as expected_rating,
                       r.REVENUE as revenue_rating,
                       r.EXPECTED_DATE as expected_date
                FROM QMS_RAT_YMQT_N r
                WHERE r.FORECAST IS NOT NULL
                ORDER BY r.EXPECTED_DATE DESC, r.YM_QT DESC
            
2025-05-30 23:23:50,301 [INFO] data_manager:200 - SQL 실행 완료: 48 행, 7 열
2025-05-30 23:23:50,302 [INFO] main:130 - 미리 정의된 SQL 실행 완료: 'expected_rating'
2025-05-30 23:23:50,302 [ERROR] main:170 - 미리 정의된 SQL 결과 저장 중 오류: name 'datetime' is not defined
2025-05-30 23:23:50,304 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:23:50] "POST /default/execute_predefined_query HTTP/1.1" 200 -
2025-05-30 23:23:51,934 [INFO] main:119 - 미리 정의된 SQL 실행 시작: 'actual_rating'
2025-05-30 23:23:51,934 [INFO] data_manager:192 - SQL 실행 중: 
                SELECT r.HIQ1_CUST_CD as customer_code,
                       CASE r.HIQ1_CUST_CD 
                           WHEN 'G113' THEN 'GOOGLE'
                           WHEN 'G150' THEN 'APPLE' 
                           WHEN 'G669' THEN 'AMD'
                           WHEN 'G932' THEN 'AMAZON'
                           WHEN 'G118' THEN 'HUAWEI'
                           WHEN 'G010' THEN 'HP INC'
                           WHEN 'G021' THEN 'ACER'
                           WHEN 'G163' THEN 'MICROSOFT'
                           WHEN 'G020' THEN 'DELL'
                           WHEN 'G959' THEN 'XIAOMI'
                           ELSE r.HIQ1_CUST_CD
                       END as customer_name,
                       r.HIQ1_APP_CD as app_type,
                       r.YM_QT as quarter,
                       r.ACTUAL as actual_rating,
                       r.SCORE as score,
                       r.EXPECTED_DATE as expected_date
                FROM QMS_RAT_YMQT_N r
                WHERE r.ACTUAL IS NOT NULL
                ORDER BY r.YM_QT DESC, TO_NUMBER(r.SCORE) DESC
            
2025-05-30 23:23:51,941 [INFO] data_manager:200 - SQL 실행 완료: 48 행, 7 열
2025-05-30 23:23:51,941 [INFO] main:130 - 미리 정의된 SQL 실행 완료: 'actual_rating'
2025-05-30 23:23:51,941 [ERROR] main:170 - 미리 정의된 SQL 결과 저장 중 오류: name 'datetime' is not defined
2025-05-30 23:23:51,943 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:23:51] "POST /default/execute_predefined_query HTTP/1.1" 200 -
2025-05-30 23:23:53,353 [INFO] main:119 - 미리 정의된 SQL 실행 시작: 'quarterly_amt_analysis'
2025-05-30 23:23:53,353 [INFO] data_manager:192 - SQL 실행 중: 
                SELECT g.PLAN_QUARTER as quarter,
                       g.HIQ1_APP_CD as app_type,
                       COUNT(*) as customer_count,
                       SUM(g.AMT) as total_amount,
                       AVG(g.AMT) as avg_amount,
                       MAX(g.AMT) as max_amount,
                       MIN(g.AMT) as min_amount,
                       ROUND(AVG(TO_NUMBER(g.SCORE)), 2) as avg_score
                FROM QMS_GBW_VIEW g
                WHERE g.AMT IS NOT NULL
                GROUP BY g.PLAN_QUARTER, g.HIQ1_APP_CD
                ORDER BY g.PLAN_QUARTER DESC, total_amount DESC
            
2025-05-30 23:23:53,356 [INFO] data_manager:200 - SQL 실행 완료: 6 행, 8 열
2025-05-30 23:23:53,356 [INFO] main:130 - 미리 정의된 SQL 실행 완료: 'quarterly_amt_analysis'
2025-05-30 23:23:53,356 [ERROR] main:170 - 미리 정의된 SQL 결과 저장 중 오류: name 'datetime' is not defined
2025-05-30 23:23:53,357 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:23:53] "POST /default/execute_predefined_query HTTP/1.1" 200 -
2025-05-30 23:24:32,752 [INFO] main:233 - 차트 처리 시작: '어플 타입 별로 비중을 파이차트로 보여줘'
2025-05-30 23:24:32,752 [INFO] chart_generator:92 - 차트 JSON 생성 중...
2025-05-30 23:24:32,756 [INFO] llm_manager:177 - API 요청 중... 엔드포인트: http://localhost:8000/v1/chat/completions
2025-05-30 23:24:40,433 [INFO] llm_manager:187 - API 응답 완료: 7.68초 소요
2025-05-30 23:24:40,433 [INFO] chart_generator:108 - 차트 JSON 생성 완료: pie 차트
2025-05-30 23:24:40,433 [INFO] chart_generator:217 - 차트 생성 시작: pie 차트
2025-05-30 23:24:40,652 [INFO] chart_generator:265 - 차트 생성 완료: ./chart_outputs/default/pie_1748615080.png
2025-05-30 23:24:40,655 [INFO] main:264 - 차트 처리 완료
2025-05-30 23:24:40,655 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:24:40] "POST /default/generate_chart HTTP/1.1" 200 -
2025-05-30 23:26:30,491 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:26:30] "GET /default/get_history HTTP/1.1" 200 -
2025-05-30 23:26:32,408 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:26:32] "[33mGET /default/get_files?folder=results_1748615080 HTTP/1.1[0m" 404 -
2025-05-30 23:26:39,271 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:26:39] "GET / HTTP/1.1" 200 -
2025-05-30 23:26:39,298 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:26:39] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-05-30 23:26:39,335 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:26:39] "[36mGET /static/js/sessionHistory.js HTTP/1.1[0m" 304 -
2025-05-30 23:26:39,342 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:26:39] "[36mGET /static/js/uiController.js HTTP/1.1[0m" 304 -
2025-05-30 23:26:39,344 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:26:39] "[36mGET /static/js/modalManager.js HTTP/1.1[0m" 304 -
2025-05-30 23:26:39,348 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:26:39] "[36mGET /static/js/dataManager.js HTTP/1.1[0m" 304 -
2025-05-30 23:26:39,349 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:26:39] "[36mGET /static/js/chartManager.js HTTP/1.1[0m" 304 -
2025-05-30 23:26:39,355 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:26:39] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-05-30 23:26:39,410 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:26:39] "GET /default/get_predefined_queries HTTP/1.1" 200 -
2025-05-30 23:26:39,420 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:26:39] "[36mGET /favicon.ico HTTP/1.1[0m" 304 -
2025-05-30 23:26:40,669 [INFO] main:119 - 미리 정의된 SQL 실행 시작: 'expected_rating'
2025-05-30 23:26:40,669 [INFO] data_manager:192 - SQL 실행 중: 
                SELECT r.HIQ1_CUST_CD as customer_code,
                       CASE r.HIQ1_CUST_CD 
                           WHEN 'G113' THEN 'GOOGLE'
                           WHEN 'G150' THEN 'APPLE' 
                           WHEN 'G669' THEN 'AMD'
                           WHEN 'G932' THEN 'AMAZON'
                           WHEN 'G118' THEN 'HUAWEI'
                           WHEN 'G010' THEN 'HP INC'
                           WHEN 'G021' THEN 'ACER'
                           WHEN 'G163' THEN 'MICROSOFT'
                           WHEN 'G020' THEN 'DELL'
                           WHEN 'G959' THEN 'XIAOMI'
                           ELSE r.HIQ1_CUST_CD
                       END as customer_name,
                       r.HIQ1_APP_CD as app_type,
                       r.YM_QT as quarter,
                       r.FORECAST as expected_rating,
                       r.REVENUE as revenue_rating,
                       r.EXPECTED_DATE as expected_date
                FROM QMS_RAT_YMQT_N r
                WHERE r.FORECAST IS NOT NULL
                ORDER BY r.EXPECTED_DATE DESC, r.YM_QT DESC
            
2025-05-30 23:26:40,673 [INFO] data_manager:200 - SQL 실행 완료: 48 행, 7 열
2025-05-30 23:26:40,673 [INFO] main:130 - 미리 정의된 SQL 실행 완료: 'expected_rating'
2025-05-30 23:26:40,673 [ERROR] main:170 - 미리 정의된 SQL 결과 저장 중 오류: name 'datetime' is not defined
2025-05-30 23:26:40,675 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:26:40] "POST /default/execute_predefined_query HTTP/1.1" 200 -
2025-05-30 23:26:59,011 [INFO] llm_manager:177 - API 요청 중... 엔드포인트: http://localhost:8000/v1/chat/completions
2025-05-30 23:27:04,939 [INFO] llm_manager:187 - API 응답 완료: 5.93초 소요
2025-05-30 23:27:04,939 [INFO] data_manager:192 - SQL 실행 중: WITH LEGEND AS ( SELECT DISTINCT A.COMM_CD AS HIQ1_APP_CD, A.COMM_CD_NM AS HIQ1_APP_NM, B.PLAN_QUARTER FROM HCOB_COMM_CD_N A, HCOB_CAL B WHERE 1=1 AND A.COMM_CD_DIV = 'CUQ_00002' AND B.PLAN_QUARTER BETWEEN '202001' AND '202502' )SELECT L.HIQ1_APP_CD, L.HIQ1_APP_NM, L.PLAN_QUARTER, M.REVENUE_PORTION, M.PORTION, CASE WHEN L.PLAN_QUARTER > 202500 THEN 1.2 ELSE DECODE(M.PORTION,0,0,NVL(ROUND(M.REVENUE_PORTION / M.PORTION, 2),0)) END AS RATING FROM LEGEND L, ( SELECT HIQ1_APP_CD, YM_QT, SUM(REVENUE_PORTION) AS REVENUE_PORTION, SUM(DECODE(REVENUE,NULL,0,PORTION)) AS PORTION FROM ( SELECT A.HIQ1_APP_CD, A.YM_QT, A.REVENUE, ( ( ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT BETWEEN FN_GET_QUARTER_CALCULATION(A.YM_QT, -3) AND A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' AND A.HIQ1_CUST_CD = YMQT.HIQ1_CUST_CD AND A.HIQ1_APP_CD = YMQT.HIQ1_APP_CD ) + ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT = A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' AND A.HIQ1_CUST_CD = YMQT.HIQ1_CUST_CD AND A.HIQ1_APP_CD = YMQT.HIQ1_APP_CD ) ) / ( ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT BETWEEN FN_GET_QUARTER_CALCULATION(A.YM_QT, -3) AND A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' ) + ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT = A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' ) ) ) AS PORTION, ( ( ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT BETWEEN FN_GET_QUARTER_CALCULATION(A.YM_QT, -3) AND A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' AND A.HIQ1_CUST_CD = YMQT.HIQ1_CUST_CD AND A.HIQ1_APP_CD = YMQT.HIQ1_APP_CD ) + ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT = A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' AND A.HIQ1_CUST_CD = YMQT.HIQ1_CUST_CD AND A.HIQ1_APP_CD = YMQT.HIQ1_APP_CD ) ) / ( ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT BETWEEN FN_GET_QUARTER_CALCULATION(A.YM_QT, -3) AND A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' ) + ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT = A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' ) ) ) * REVENUE AS REVENUE_PORTION FROM QMS_RAT_YMQT_N A, QMS_RAT_CUST B WHERE 1=1 AND A.HIQ1_CUST_CD = B.HIQ1_CUST_CD AND A.HIQ1_APP_CD = B.HIQ1_APP_CD AND A.YM_QT BETWEEN '202001' AND '202502' ) MAIN WHERE 1=1 GROUP BY HIQ1_APP_CD, YM_QT ) M WHERE 1=1 AND L.HIQ1_APP_CD = M.HIQ1_APP_CD(+) AND L.PLAN_QUARTER = M.YM_QT(+) ORDER BY L.PLAN_QUARTER
2025-05-30 23:27:04,944 [ERROR] data_manager:203 - SQL 실행 오류: (oracledb.exceptions.DatabaseError) ORA-00904: "A"."COMM_CD_NM": invalid identifier
[SQL: WITH LEGEND AS ( SELECT DISTINCT A.COMM_CD AS HIQ1_APP_CD, A.COMM_CD_NM AS HIQ1_APP_NM, B.PLAN_QUARTER FROM HCOB_COMM_CD_N A, HCOB_CAL B WHERE 1=1 AND A.COMM_CD_DIV = 'CUQ_00002' AND B.PLAN_QUARTER BETWEEN '202001' AND '202502' )SELECT L.HIQ1_APP_CD, L.HIQ1_APP_NM, L.PLAN_QUARTER, M.REVENUE_PORTION, M.PORTION, CASE WHEN L.PLAN_QUARTER > 202500 THEN 1.2 ELSE DECODE(M.PORTION,0,0,NVL(ROUND(M.REVENUE_PORTION / M.PORTION, 2),0)) END AS RATING FROM LEGEND L, ( SELECT HIQ1_APP_CD, YM_QT, SUM(REVENUE_PORTION) AS REVENUE_PORTION, SUM(DECODE(REVENUE,NULL,0,PORTION)) AS PORTION FROM ( SELECT A.HIQ1_APP_CD, A.YM_QT, A.REVENUE, ( ( ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT BETWEEN FN_GET_QUARTER_CALCULATION(A.YM_QT, -3) AND A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' AND A.HIQ1_CUST_CD = YMQT.HIQ1_CUST_CD AND A.HIQ1_APP_CD = YMQT.HIQ1_APP_CD ) + ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT = A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' AND A.HIQ1_CUST_CD = YMQT.HIQ1_CUST_CD AND A.HIQ1_APP_CD = YMQT.HIQ1_APP_CD ) ) / ( ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT BETWEEN FN_GET_QUARTER_CALCULATION(A.YM_QT, -3) AND A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' ) + ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT = A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' ) ) ) AS PORTION, ( ( ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT BETWEEN FN_GET_QUARTER_CALCULATION(A.YM_QT, -3) AND A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' AND A.HIQ1_CUST_CD = YMQT.HIQ1_CUST_CD AND A.HIQ1_APP_CD = YMQT.HIQ1_APP_CD ) + ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT = A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' AND A.HIQ1_CUST_CD = YMQT.HIQ1_CUST_CD AND A.HIQ1_APP_CD = YMQT.HIQ1_APP_CD ) ) / ( ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT BETWEEN FN_GET_QUARTER_CALCULATION(A.YM_QT, -3) AND A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' ) + ( SELECT SUM( CASE WHEN YMQT.YM_QT >= TO_CHAR(SYSDATE,'YYYY') || '0' ||TO_CHAR(SYSDATE,'Q') THEN TO_NUMBER(YMQT.ESTIMATE) ELSE GBW.AMT END ) FROM QMS_RAT_YMQT_N YMQT, QMS_RAT_CUST CUST, QMS_GBW_VIEW GBW WHERE 1=1 AND YMQT.YM_QT = A.YM_QT AND YMQT.HIQ1_CUST_CD = CUST.HIQ1_CUST_CD AND YMQT.HIQ1_APP_CD = CUST.HIQ1_APP_CD AND CUST.HIQ1_CUST_CD = GBW.HIQ1_CUST_CD AND CUST.HIQ1_APP_CD = GBW.HIQ1_APP_CD AND YMQT.YM_QT = GBW.PLAN_QUARTER(+) AND CUST.USE_YN = 'Y' ) ) ) * REVENUE AS REVENUE_PORTION FROM QMS_RAT_YMQT_N A, QMS_RAT_CUST B WHERE 1=1 AND A.HIQ1_CUST_CD = B.HIQ1_CUST_CD AND A.HIQ1_APP_CD = B.HIQ1_APP_CD AND A.YM_QT BETWEEN '202001' AND '202502' ) MAIN WHERE 1=1 GROUP BY HIQ1_APP_CD, YM_QT ) M WHERE 1=1 AND L.HIQ1_APP_CD = M.HIQ1_APP_CD(+) AND L.PLAN_QUARTER = M.YM_QT(+) ORDER BY L.PLAN_QUARTER]
(Background on this error at: https://sqlalche.me/e/20/4xp6)
2025-05-30 23:27:04,945 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:27:04] "POST /default/modify_sql HTTP/1.1" 200 -
2025-05-30 23:27:23,280 [INFO] main:119 - 미리 정의된 SQL 실행 시작: 'customer_performance_2024'
2025-05-30 23:27:23,281 [INFO] data_manager:192 - SQL 실행 중: 
                SELECT g.HIQ1_CUST_CD as customer_code,
                       CASE g.HIQ1_CUST_CD 
                           WHEN 'G113' THEN 'GOOGLE'
                           WHEN 'G150' THEN 'APPLE' 
                           WHEN 'G669' THEN 'AMD'
                           WHEN 'G932' THEN 'AMAZON'
                           WHEN 'G118' THEN 'HUAWEI'
                           WHEN 'G010' THEN 'HP INC'
                           WHEN 'G021' THEN 'ACER'
                           WHEN 'G163' THEN 'MICROSOFT'
                           WHEN 'G020' THEN 'DELL'
                           WHEN 'G959' THEN 'XIAOMI'
                           ELSE g.HIQ1_CUST_CD
                       END as customer_name,
                       g.HIQ1_APP_CD as app_type,
                       g.AMT as performance_amount,
                       g.ACTUAL as actual_rating,
                       g.SCORE as performance_score,
                       g.PLAN_QUARTER as quarter
                FROM QMS_GBW_VIEW g
                WHERE g.PLAN_QUARTER LIKE '2024%'
                ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC
            
2025-05-30 23:27:23,284 [INFO] data_manager:200 - SQL 실행 완료: 21 행, 7 열
2025-05-30 23:27:23,284 [INFO] main:130 - 미리 정의된 SQL 실행 완료: 'customer_performance_2024'
2025-05-30 23:27:23,284 [ERROR] main:170 - 미리 정의된 SQL 결과 저장 중 오류: name 'datetime' is not defined
2025-05-30 23:27:23,285 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:27:23] "POST /default/execute_predefined_query HTTP/1.1" 200 -
2025-05-30 23:27:31,549 [INFO] main:119 - 미리 정의된 SQL 실행 시작: 'quarterly_amt_analysis'
2025-05-30 23:27:31,549 [INFO] data_manager:192 - SQL 실행 중: 
                SELECT g.PLAN_QUARTER as quarter,
                       g.HIQ1_APP_CD as app_type,
                       COUNT(*) as customer_count,
                       SUM(g.AMT) as total_amount,
                       AVG(g.AMT) as avg_amount,
                       MAX(g.AMT) as max_amount,
                       MIN(g.AMT) as min_amount,
                       ROUND(AVG(TO_NUMBER(g.SCORE)), 2) as avg_score
                FROM QMS_GBW_VIEW g
                WHERE g.AMT IS NOT NULL
                GROUP BY g.PLAN_QUARTER, g.HIQ1_APP_CD
                ORDER BY g.PLAN_QUARTER DESC, total_amount DESC
            
2025-05-30 23:27:31,552 [INFO] data_manager:200 - SQL 실행 완료: 6 행, 8 열
2025-05-30 23:27:31,552 [INFO] main:130 - 미리 정의된 SQL 실행 완료: 'quarterly_amt_analysis'
2025-05-30 23:27:31,553 [ERROR] main:170 - 미리 정의된 SQL 결과 저장 중 오류: name 'datetime' is not defined
2025-05-30 23:27:31,554 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:27:31] "POST /default/execute_predefined_query HTTP/1.1" 200 -
2025-05-30 23:27:34,003 [INFO] main:119 - 미리 정의된 SQL 실행 시작: 'customer_performance_2024'
2025-05-30 23:27:34,003 [INFO] data_manager:192 - SQL 실행 중: 
                SELECT g.HIQ1_CUST_CD as customer_code,
                       CASE g.HIQ1_CUST_CD 
                           WHEN 'G113' THEN 'GOOGLE'
                           WHEN 'G150' THEN 'APPLE' 
                           WHEN 'G669' THEN 'AMD'
                           WHEN 'G932' THEN 'AMAZON'
                           WHEN 'G118' THEN 'HUAWEI'
                           WHEN 'G010' THEN 'HP INC'
                           WHEN 'G021' THEN 'ACER'
                           WHEN 'G163' THEN 'MICROSOFT'
                           WHEN 'G020' THEN 'DELL'
                           WHEN 'G959' THEN 'XIAOMI'
                           ELSE g.HIQ1_CUST_CD
                       END as customer_name,
                       g.HIQ1_APP_CD as app_type,
                       g.AMT as performance_amount,
                       g.ACTUAL as actual_rating,
                       g.SCORE as performance_score,
                       g.PLAN_QUARTER as quarter
                FROM QMS_GBW_VIEW g
                WHERE g.PLAN_QUARTER LIKE '2024%'
                ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC
            
2025-05-30 23:27:34,006 [INFO] data_manager:200 - SQL 실행 완료: 21 행, 7 열
2025-05-30 23:27:34,006 [INFO] main:130 - 미리 정의된 SQL 실행 완료: 'customer_performance_2024'
2025-05-30 23:27:34,006 [ERROR] main:170 - 미리 정의된 SQL 결과 저장 중 오류: name 'datetime' is not defined
2025-05-30 23:27:34,007 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:27:34] "POST /default/execute_predefined_query HTTP/1.1" 200 -
2025-05-30 23:27:37,233 [INFO] main:119 - 미리 정의된 SQL 실행 시작: 'quarterly_amt_analysis'
2025-05-30 23:27:37,233 [INFO] data_manager:192 - SQL 실행 중: 
                SELECT g.PLAN_QUARTER as quarter,
                       g.HIQ1_APP_CD as app_type,
                       COUNT(*) as customer_count,
                       SUM(g.AMT) as total_amount,
                       AVG(g.AMT) as avg_amount,
                       MAX(g.AMT) as max_amount,
                       MIN(g.AMT) as min_amount,
                       ROUND(AVG(TO_NUMBER(g.SCORE)), 2) as avg_score
                FROM QMS_GBW_VIEW g
                WHERE g.AMT IS NOT NULL
                GROUP BY g.PLAN_QUARTER, g.HIQ1_APP_CD
                ORDER BY g.PLAN_QUARTER DESC, total_amount DESC
            
2025-05-30 23:27:37,237 [INFO] data_manager:200 - SQL 실행 완료: 6 행, 8 열
2025-05-30 23:27:37,237 [INFO] main:130 - 미리 정의된 SQL 실행 완료: 'quarterly_amt_analysis'
2025-05-30 23:27:37,237 [ERROR] main:170 - 미리 정의된 SQL 결과 저장 중 오류: name 'datetime' is not defined
2025-05-30 23:27:37,238 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:27:37] "POST /default/execute_predefined_query HTTP/1.1" 200 -
2025-05-30 23:27:39,319 [INFO] main:119 - 미리 정의된 SQL 실행 시작: 'customer_performance_2024'
2025-05-30 23:27:39,319 [INFO] data_manager:192 - SQL 실행 중: 
                SELECT g.HIQ1_CUST_CD as customer_code,
                       CASE g.HIQ1_CUST_CD 
                           WHEN 'G113' THEN 'GOOGLE'
                           WHEN 'G150' THEN 'APPLE' 
                           WHEN 'G669' THEN 'AMD'
                           WHEN 'G932' THEN 'AMAZON'
                           WHEN 'G118' THEN 'HUAWEI'
                           WHEN 'G010' THEN 'HP INC'
                           WHEN 'G021' THEN 'ACER'
                           WHEN 'G163' THEN 'MICROSOFT'
                           WHEN 'G020' THEN 'DELL'
                           WHEN 'G959' THEN 'XIAOMI'
                           ELSE g.HIQ1_CUST_CD
                       END as customer_name,
                       g.HIQ1_APP_CD as app_type,
                       g.AMT as performance_amount,
                       g.ACTUAL as actual_rating,
                       g.SCORE as performance_score,
                       g.PLAN_QUARTER as quarter
                FROM QMS_GBW_VIEW g
                WHERE g.PLAN_QUARTER LIKE '2024%'
                ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC
            
2025-05-30 23:27:39,322 [INFO] data_manager:200 - SQL 실행 완료: 21 행, 7 열
2025-05-30 23:27:39,322 [INFO] main:130 - 미리 정의된 SQL 실행 완료: 'customer_performance_2024'
2025-05-30 23:27:39,322 [ERROR] main:170 - 미리 정의된 SQL 결과 저장 중 오류: name 'datetime' is not defined
2025-05-30 23:27:39,324 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:27:39] "POST /default/execute_predefined_query HTTP/1.1" 200 -
2025-05-30 23:27:51,165 [INFO] llm_manager:177 - API 요청 중... 엔드포인트: http://localhost:8000/v1/chat/completions
2025-05-30 23:27:56,931 [INFO] llm_manager:187 - API 응답 완료: 5.77초 소요
2025-05-30 23:27:56,931 [INFO] data_manager:148 - SQL 코드 블록에서 쿼리 추출 완료
2025-05-30 23:27:56,931 [INFO] data_manager:177 - 검증 및 수정된 SQL 쿼리: SELECT g.HIQ1_CUST_CD as customer_code, CASE g.HIQ1_CUST_CD WHEN 'G113' THEN 'GOOGLE' WHEN 'G150' THEN 'APPLE' WHEN 'G669' THEN 'AMD' WHEN 'G932' THEN 'AMAZON' WHEN 'G118' THEN 'HUAWEI' WHEN 'G010' THEN 'HP INC' WHEN 'G021' THEN 'ACER' WHEN 'G163' THEN 'MICROSOFT' WHEN 'G020' THEN 'DELL' WHEN 'G959' THEN 'XIAOMI' ELSE g.HIQ1_CUST_CD END as customer_name, g.HIQ1_APP_CD as app_type, g.AMT as performance_amount, g.ACTUAL as actual_rating, g.SCORE as performance_score, g.PLAN_QUARTER as quarter FROM QMS_GBW_VIEW g WHERE g.PLAN_QUARTER LIKE '2024%' AND g.HIQ1_APP_CD = 'SERVER' ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC FETCH FIRST 1000 ROWS ONLY
2025-05-30 23:27:56,931 [INFO] data_manager:192 - SQL 실행 중: SELECT g.HIQ1_CUST_CD as customer_code, CASE g.HIQ1_CUST_CD WHEN 'G113' THEN 'GOOGLE' WHEN 'G150' THEN 'APPLE' WHEN 'G669' THEN 'AMD' WHEN 'G932' THEN 'AMAZON' WHEN 'G118' THEN 'HUAWEI' WHEN 'G010' THEN 'HP INC' WHEN 'G021' THEN 'ACER' WHEN 'G163' THEN 'MICROSOFT' WHEN 'G020' THEN 'DELL' WHEN 'G959' THEN 'XIAOMI' ELSE g.HIQ1_CUST_CD END as customer_name, g.HIQ1_APP_CD as app_type, g.AMT as performance_amount, g.ACTUAL as actual_rating, g.SCORE as performance_score, g.PLAN_QUARTER as quarter FROM QMS_GBW_VIEW g WHERE g.PLAN_QUARTER LIKE '2024%' AND g.HIQ1_APP_CD = 'SERVER' ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC FETCH FIRST 1000 ROWS ONLY
2025-05-30 23:27:56,965 [INFO] data_manager:200 - SQL 실행 완료: 7 행, 7 열
2025-05-30 23:27:56,966 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:27:56] "POST /default/modify_sql HTTP/1.1" 200 -
2025-05-30 23:28:25,869 [INFO] main:233 - 차트 처리 시작: '고객별 비중을 파이차트로 보여줘'
2025-05-30 23:28:25,870 [INFO] chart_generator:92 - 차트 JSON 생성 중...
2025-05-30 23:28:25,872 [INFO] llm_manager:177 - API 요청 중... 엔드포인트: http://localhost:8000/v1/chat/completions
2025-05-30 23:28:35,077 [INFO] llm_manager:187 - API 응답 완료: 9.20초 소요
2025-05-30 23:28:35,077 [INFO] chart_generator:108 - 차트 JSON 생성 완료: pie 차트
2025-05-30 23:28:35,077 [INFO] chart_generator:217 - 차트 생성 시작: pie 차트
2025-05-30 23:28:35,236 [INFO] chart_generator:265 - 차트 생성 완료: ./chart_outputs/default/pie_1748615315.png
2025-05-30 23:28:35,238 [INFO] main:264 - 차트 처리 완료
2025-05-30 23:28:35,238 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:28:35] "POST /default/generate_chart HTTP/1.1" 200 -
2025-05-30 23:29:49,887 [INFO] llm_manager:177 - API 요청 중... 엔드포인트: http://localhost:8000/v1/chat/completions
2025-05-30 23:29:56,501 [INFO] llm_manager:187 - API 응답 완료: 6.61초 소요
2025-05-30 23:29:56,502 [INFO] data_manager:148 - SQL 코드 블록에서 쿼리 추출 완료
2025-05-30 23:29:56,502 [INFO] data_manager:177 - 검증 및 수정된 SQL 쿼리: SELECT g.HIQ1_CUST_CD as customer_code, CASE g.HIQ1_CUST_CD WHEN 'G113' THEN 'GOOGLE' WHEN 'G150' THEN 'APPLE' WHEN 'G669' THEN 'AMD' WHEN 'G932' THEN 'AMAZON' WHEN 'G118' THEN 'HUAWEI' WHEN 'G010' THEN 'HP INC' WHEN 'G021' THEN 'ACER' WHEN 'G163' THEN 'MICROSOFT' WHEN 'G020' THEN 'DELL' WHEN 'G959' THEN 'XIAOMI' ELSE g.HIQ1_CUST_CD END as customer_name, g.HIQ1_APP_CD as app_type, g.AMT as performance_amount, g.ACTUAL as actual_rating, g.SCORE as performance_score, g.PLAN_QUARTER as quarter FROM QMS_GBW_VIEW g WHERE g.PLAN_QUARTER LIKE '2024%' AND g.HIQ1_APP_CD = 'SERVER' AND g.HIQ1_CUST_CD = 'G113' ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC FETCH FIRST 1000 ROWS ONLY;
2025-05-30 23:29:56,502 [INFO] data_manager:192 - SQL 실행 중: SELECT g.HIQ1_CUST_CD as customer_code, CASE g.HIQ1_CUST_CD WHEN 'G113' THEN 'GOOGLE' WHEN 'G150' THEN 'APPLE' WHEN 'G669' THEN 'AMD' WHEN 'G932' THEN 'AMAZON' WHEN 'G118' THEN 'HUAWEI' WHEN 'G010' THEN 'HP INC' WHEN 'G021' THEN 'ACER' WHEN 'G163' THEN 'MICROSOFT' WHEN 'G020' THEN 'DELL' WHEN 'G959' THEN 'XIAOMI' ELSE g.HIQ1_CUST_CD END as customer_name, g.HIQ1_APP_CD as app_type, g.AMT as performance_amount, g.ACTUAL as actual_rating, g.SCORE as performance_score, g.PLAN_QUARTER as quarter FROM QMS_GBW_VIEW g WHERE g.PLAN_QUARTER LIKE '2024%' AND g.HIQ1_APP_CD = 'SERVER' AND g.HIQ1_CUST_CD = 'G113' ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC FETCH FIRST 1000 ROWS ONLY;
2025-05-30 23:29:56,504 [ERROR] data_manager:203 - SQL 실행 오류: (oracledb.exceptions.DatabaseError) ORA-00933: SQL command not properly ended
[SQL: SELECT g.HIQ1_CUST_CD as customer_code, CASE g.HIQ1_CUST_CD WHEN 'G113' THEN 'GOOGLE' WHEN 'G150' THEN 'APPLE' WHEN 'G669' THEN 'AMD' WHEN 'G932' THEN 'AMAZON' WHEN 'G118' THEN 'HUAWEI' WHEN 'G010' THEN 'HP INC' WHEN 'G021' THEN 'ACER' WHEN 'G163' THEN 'MICROSOFT' WHEN 'G020' THEN 'DELL' WHEN 'G959' THEN 'XIAOMI' ELSE g.HIQ1_CUST_CD END as customer_name, g.HIQ1_APP_CD as app_type, g.AMT as performance_amount, g.ACTUAL as actual_rating, g.SCORE as performance_score, g.PLAN_QUARTER as quarter FROM QMS_GBW_VIEW g WHERE g.PLAN_QUARTER LIKE '2024%' AND g.HIQ1_APP_CD = 'SERVER' AND g.HIQ1_CUST_CD = 'G113' ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC FETCH FIRST 1000 ROWS ONLY;]
(Background on this error at: https://sqlalche.me/e/20/4xp6)
2025-05-30 23:29:56,506 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:29:56] "POST /default/modify_sql HTTP/1.1" 200 -
2025-05-30 23:31:50,441 [INFO] __main__:73 - 사용자 '이두원'가 접속했습니다.
2025-05-30 23:31:50,443 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:31:50] "GET /이두원 HTTP/1.1" 200 -
2025-05-30 23:31:50,479 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:31:50] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-05-30 23:31:50,512 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:31:50] "[36mGET /static/js/dataManager.js HTTP/1.1[0m" 304 -
2025-05-30 23:31:50,514 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:31:50] "[36mGET /static/js/chartManager.js HTTP/1.1[0m" 304 -
2025-05-30 23:31:50,515 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:31:50] "[36mGET /static/js/sessionHistory.js HTTP/1.1[0m" 304 -
2025-05-30 23:31:50,517 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:31:50] "[36mGET /static/js/modalManager.js HTTP/1.1[0m" 304 -
2025-05-30 23:31:50,519 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:31:50] "[36mGET /static/js/uiController.js HTTP/1.1[0m" 304 -
2025-05-30 23:31:50,520 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:31:50] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-05-30 23:31:50,613 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:31:50] "GET /이두원/get_predefined_queries HTTP/1.1" 200 -
2025-05-30 23:31:50,620 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:31:50] "[36mGET /favicon.ico HTTP/1.1[0m" 304 -
2025-05-30 23:31:57,760 [INFO] llm_manager:83 - API 클라이언트 초기화 완료
2025-05-30 23:31:57,760 [INFO] llm_manager:33 - LLM 매니저 초기화 완료 - 모드: api
2025-05-30 23:31:57,760 [INFO] data_manager:42 - 데이터 로드 중... Rating_Test_Data.csv
2025-05-30 23:31:57,762 [INFO] data_manager:45 - CSV 데이터 로드 완료: 108 행, 12 열
2025-05-30 23:31:57,762 [INFO] data_manager:50 - 메타데이터 로드 중... metadata.json
2025-05-30 23:31:57,762 [INFO] data_manager:54 - 메타데이터 로드 완료
2025-05-30 23:31:57,762 [INFO] data_manager:80 - Oracle 데이터베이스 설정 중...
2025-05-30 23:31:57,763 [INFO] data_manager:89 - Oracle 데이터베이스 연결 성공
2025-05-30 23:31:57,763 [INFO] data_manager:38 - 데이터 관리자 초기화 완료
2025-05-30 23:31:57,763 [INFO] chart_generator:78 - 차트 생성기 초기화 완료
2025-05-30 23:31:57,763 [INFO] main:78 - 차트 생성 애플리케이션 초기화 완료
2025-05-30 23:31:57,763 [INFO] main:119 - 미리 정의된 SQL 실행 시작: 'customer_performance_2024'
2025-05-30 23:31:57,763 [INFO] data_manager:192 - SQL 실행 중: 
                SELECT g.HIQ1_CUST_CD as customer_code,
                       CASE g.HIQ1_CUST_CD 
                           WHEN 'G113' THEN 'GOOGLE'
                           WHEN 'G150' THEN 'APPLE' 
                           WHEN 'G669' THEN 'AMD'
                           WHEN 'G932' THEN 'AMAZON'
                           WHEN 'G118' THEN 'HUAWEI'
                           WHEN 'G010' THEN 'HP INC'
                           WHEN 'G021' THEN 'ACER'
                           WHEN 'G163' THEN 'MICROSOFT'
                           WHEN 'G020' THEN 'DELL'
                           WHEN 'G959' THEN 'XIAOMI'
                           ELSE g.HIQ1_CUST_CD
                       END as customer_name,
                       g.HIQ1_APP_CD as app_type,
                       g.AMT as performance_amount,
                       g.ACTUAL as actual_rating,
                       g.SCORE as performance_score,
                       g.PLAN_QUARTER as quarter
                FROM QMS_GBW_VIEW g
                WHERE g.PLAN_QUARTER LIKE '2024%'
                ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC
            
2025-05-30 23:31:57,796 [INFO] data_manager:200 - SQL 실행 완료: 21 행, 7 열
2025-05-30 23:31:57,796 [INFO] main:130 - 미리 정의된 SQL 실행 완료: 'customer_performance_2024'
2025-05-30 23:31:57,796 [ERROR] main:170 - 미리 정의된 SQL 결과 저장 중 오류: name 'datetime' is not defined
2025-05-30 23:31:57,798 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:31:57] "POST /이두원/execute_predefined_query HTTP/1.1" 200 -
2025-05-30 23:32:18,211 [INFO] llm_manager:177 - API 요청 중... 엔드포인트: http://localhost:8000/v1/chat/completions
2025-05-30 23:32:24,048 [INFO] llm_manager:187 - API 응답 완료: 5.84초 소요
2025-05-30 23:32:24,048 [INFO] data_manager:148 - SQL 코드 블록에서 쿼리 추출 완료
2025-05-30 23:32:24,048 [INFO] data_manager:177 - 검증 및 수정된 SQL 쿼리: SELECT g.HIQ1_CUST_CD as customer_code, CASE g.HIQ1_CUST_CD WHEN 'G113' THEN 'GOOGLE' WHEN 'G150' THEN 'APPLE' WHEN 'G669' THEN 'AMD' WHEN 'G932' THEN 'AMAZON' WHEN 'G118' THEN 'HUAWEI' WHEN 'G010' THEN 'HP INC' WHEN 'G021' THEN 'ACER' WHEN 'G163' THEN 'MICROSOFT' WHEN 'G020' THEN 'DELL' WHEN 'G959' THEN 'XIAOMI' ELSE g.HIQ1_CUST_CD END as customer_name, g.HIQ1_APP_CD as app_type, g.AMT as performance_amount, g.ACTUAL as actual_rating, g.SCORE as performance_score, g.PLAN_QUARTER as quarter FROM QMS_GBW_VIEW g WHERE g.PLAN_QUARTER LIKE '2024%' AND g.HIQ1_CUST_CD = 'G932' ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC FETCH FIRST 1000 ROWS ONLY
2025-05-30 23:32:24,048 [INFO] data_manager:192 - SQL 실행 중: SELECT g.HIQ1_CUST_CD as customer_code, CASE g.HIQ1_CUST_CD WHEN 'G113' THEN 'GOOGLE' WHEN 'G150' THEN 'APPLE' WHEN 'G669' THEN 'AMD' WHEN 'G932' THEN 'AMAZON' WHEN 'G118' THEN 'HUAWEI' WHEN 'G010' THEN 'HP INC' WHEN 'G021' THEN 'ACER' WHEN 'G163' THEN 'MICROSOFT' WHEN 'G020' THEN 'DELL' WHEN 'G959' THEN 'XIAOMI' ELSE g.HIQ1_CUST_CD END as customer_name, g.HIQ1_APP_CD as app_type, g.AMT as performance_amount, g.ACTUAL as actual_rating, g.SCORE as performance_score, g.PLAN_QUARTER as quarter FROM QMS_GBW_VIEW g WHERE g.PLAN_QUARTER LIKE '2024%' AND g.HIQ1_CUST_CD = 'G932' ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC FETCH FIRST 1000 ROWS ONLY
2025-05-30 23:32:24,057 [INFO] data_manager:200 - SQL 실행 완료: 3 행, 7 열
2025-05-30 23:32:24,059 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:32:24] "POST /이두원/modify_sql HTTP/1.1" 200 -
2025-05-30 23:32:36,884 [INFO] llm_manager:177 - API 요청 중... 엔드포인트: http://localhost:8000/v1/chat/completions
2025-05-30 23:32:42,497 [INFO] llm_manager:187 - API 응답 완료: 5.61초 소요
2025-05-30 23:32:42,498 [INFO] data_manager:177 - 검증 및 수정된 SQL 쿼리: SELECT g.HIQ1_CUST_CD as customer_code, CASE g.HIQ1_CUST_CD WHEN 'G113' THEN 'GOOGLE' WHEN 'G150' THEN 'APPLE' WHEN 'G669' THEN 'AMD' WHEN 'G932' THEN 'AMAZON' WHEN 'G118' THEN 'HUAWEI' WHEN 'G010' THEN 'HP INC' WHEN 'G021' THEN 'ACER' WHEN 'G163' THEN 'MICROSOFT' WHEN 'G020' THEN 'DELL' WHEN 'G959' THEN 'XIAOMI' ELSE g.HIQ1_CUST_CD END as customer_name, g.HIQ1_APP_CD as app_type, g.AMT as performance_amount, g.ACTUAL as actual_rating, g.SCORE as performance_score, g.PLAN_QUARTER as quarter FROM QMS_GBW_VIEW g WHERE g.PLAN_QUARTER LIKE '2024%' AND g.HIQ1_CUST_CD = 'G932' AND g.HIQ1_APP_CD = 'SERVER' ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC FETCH FIRST 1000 ROWS ONLY;
2025-05-30 23:32:42,498 [INFO] data_manager:192 - SQL 실행 중: SELECT g.HIQ1_CUST_CD as customer_code, CASE g.HIQ1_CUST_CD WHEN 'G113' THEN 'GOOGLE' WHEN 'G150' THEN 'APPLE' WHEN 'G669' THEN 'AMD' WHEN 'G932' THEN 'AMAZON' WHEN 'G118' THEN 'HUAWEI' WHEN 'G010' THEN 'HP INC' WHEN 'G021' THEN 'ACER' WHEN 'G163' THEN 'MICROSOFT' WHEN 'G020' THEN 'DELL' WHEN 'G959' THEN 'XIAOMI' ELSE g.HIQ1_CUST_CD END as customer_name, g.HIQ1_APP_CD as app_type, g.AMT as performance_amount, g.ACTUAL as actual_rating, g.SCORE as performance_score, g.PLAN_QUARTER as quarter FROM QMS_GBW_VIEW g WHERE g.PLAN_QUARTER LIKE '2024%' AND g.HIQ1_CUST_CD = 'G932' AND g.HIQ1_APP_CD = 'SERVER' ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC FETCH FIRST 1000 ROWS ONLY;
2025-05-30 23:32:42,500 [ERROR] data_manager:203 - SQL 실행 오류: (oracledb.exceptions.DatabaseError) ORA-00933: SQL command not properly ended
[SQL: SELECT g.HIQ1_CUST_CD as customer_code, CASE g.HIQ1_CUST_CD WHEN 'G113' THEN 'GOOGLE' WHEN 'G150' THEN 'APPLE' WHEN 'G669' THEN 'AMD' WHEN 'G932' THEN 'AMAZON' WHEN 'G118' THEN 'HUAWEI' WHEN 'G010' THEN 'HP INC' WHEN 'G021' THEN 'ACER' WHEN 'G163' THEN 'MICROSOFT' WHEN 'G020' THEN 'DELL' WHEN 'G959' THEN 'XIAOMI' ELSE g.HIQ1_CUST_CD END as customer_name, g.HIQ1_APP_CD as app_type, g.AMT as performance_amount, g.ACTUAL as actual_rating, g.SCORE as performance_score, g.PLAN_QUARTER as quarter FROM QMS_GBW_VIEW g WHERE g.PLAN_QUARTER LIKE '2024%' AND g.HIQ1_CUST_CD = 'G932' AND g.HIQ1_APP_CD = 'SERVER' ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC FETCH FIRST 1000 ROWS ONLY;]
(Background on this error at: https://sqlalche.me/e/20/4xp6)
2025-05-30 23:32:42,502 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:32:42] "POST /이두원/modify_sql HTTP/1.1" 200 -
2025-05-30 23:37:43,411 [INFO] main:119 - 미리 정의된 SQL 실행 시작: 'customer_performance_2024'
2025-05-30 23:37:43,411 [INFO] data_manager:192 - SQL 실행 중: 
                SELECT g.HIQ1_CUST_CD as customer_code,
                       CASE g.HIQ1_CUST_CD 
                           WHEN 'G113' THEN 'GOOGLE'
                           WHEN 'G150' THEN 'APPLE' 
                           WHEN 'G669' THEN 'AMD'
                           WHEN 'G932' THEN 'AMAZON'
                           WHEN 'G118' THEN 'HUAWEI'
                           WHEN 'G010' THEN 'HP INC'
                           WHEN 'G021' THEN 'ACER'
                           WHEN 'G163' THEN 'MICROSOFT'
                           WHEN 'G020' THEN 'DELL'
                           WHEN 'G959' THEN 'XIAOMI'
                           ELSE g.HIQ1_CUST_CD
                       END as customer_name,
                       g.HIQ1_APP_CD as app_type,
                       g.AMT as performance_amount,
                       g.ACTUAL as actual_rating,
                       g.SCORE as performance_score,
                       g.PLAN_QUARTER as quarter
                FROM QMS_GBW_VIEW g
                WHERE g.PLAN_QUARTER LIKE '2024%'
                ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC
            
2025-05-30 23:37:43,414 [INFO] data_manager:200 - SQL 실행 완료: 21 행, 7 열
2025-05-30 23:37:43,414 [INFO] main:130 - 미리 정의된 SQL 실행 완료: 'customer_performance_2024'
2025-05-30 23:37:43,414 [ERROR] main:170 - 미리 정의된 SQL 결과 저장 중 오류: name 'datetime' is not defined
2025-05-30 23:37:43,416 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:37:43] "POST /이두원/execute_predefined_query HTTP/1.1" 200 -
2025-05-30 23:37:54,685 [INFO] llm_manager:177 - API 요청 중... 엔드포인트: http://localhost:8000/v1/chat/completions
2025-05-30 23:38:00,437 [INFO] llm_manager:187 - API 응답 완료: 5.75초 소요
2025-05-30 23:38:00,438 [INFO] data_manager:148 - SQL 코드 블록에서 쿼리 추출 완료
2025-05-30 23:38:00,438 [INFO] data_manager:177 - 검증 및 수정된 SQL 쿼리: SELECT g.HIQ1_CUST_CD as customer_code, CASE g.HIQ1_CUST_CD WHEN 'G113' THEN 'GOOGLE' WHEN 'G150' THEN 'APPLE' WHEN 'G669' THEN 'AMD' WHEN 'G932' THEN 'AMAZON' WHEN 'G118' THEN 'HUAWEI' WHEN 'G010' THEN 'HP INC' WHEN 'G021' THEN 'ACER' WHEN 'G163' THEN 'MICROSOFT' WHEN 'G020' THEN 'DELL' WHEN 'G959' THEN 'XIAOMI' ELSE g.HIQ1_CUST_CD END as customer_name, g.HIQ1_APP_CD as app_type, g.AMT as performance_amount, g.ACTUAL as actual_rating, g.SCORE as performance_score, g.PLAN_QUARTER as quarter FROM QMS_GBW_VIEW g WHERE g.PLAN_QUARTER LIKE '2024%' AND g.HIQ1_APP_CD = 'SERVER' ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC FETCH FIRST 1000 ROWS ONLY
2025-05-30 23:38:00,438 [INFO] data_manager:192 - SQL 실행 중: SELECT g.HIQ1_CUST_CD as customer_code, CASE g.HIQ1_CUST_CD WHEN 'G113' THEN 'GOOGLE' WHEN 'G150' THEN 'APPLE' WHEN 'G669' THEN 'AMD' WHEN 'G932' THEN 'AMAZON' WHEN 'G118' THEN 'HUAWEI' WHEN 'G010' THEN 'HP INC' WHEN 'G021' THEN 'ACER' WHEN 'G163' THEN 'MICROSOFT' WHEN 'G020' THEN 'DELL' WHEN 'G959' THEN 'XIAOMI' ELSE g.HIQ1_CUST_CD END as customer_name, g.HIQ1_APP_CD as app_type, g.AMT as performance_amount, g.ACTUAL as actual_rating, g.SCORE as performance_score, g.PLAN_QUARTER as quarter FROM QMS_GBW_VIEW g WHERE g.PLAN_QUARTER LIKE '2024%' AND g.HIQ1_APP_CD = 'SERVER' ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC FETCH FIRST 1000 ROWS ONLY
2025-05-30 23:38:00,442 [INFO] data_manager:200 - SQL 실행 완료: 7 행, 7 열
2025-05-30 23:38:00,444 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:38:00] "POST /이두원/modify_sql HTTP/1.1" 200 -
2025-05-30 23:41:56,738 [INFO] llm_manager:177 - API 요청 중... 엔드포인트: http://localhost:8000/v1/chat/completions
2025-05-30 23:42:02,413 [INFO] llm_manager:187 - API 응답 완료: 5.67초 소요
2025-05-30 23:42:02,413 [INFO] data_manager:177 - 검증 및 수정된 SQL 쿼리: SELECT g.HIQ1_CUST_CD as customer_code, CASE g.HIQ1_CUST_CD WHEN 'G113' THEN 'GOOGLE' WHEN 'G150' THEN 'APPLE' WHEN 'G669' THEN 'AMD' WHEN 'G932' THEN 'AMAZON' WHEN 'G118' THEN 'HUAWEI' WHEN 'G010' THEN 'HP INC' WHEN 'G021' THEN 'ACER' WHEN 'G163' THEN 'MICROSOFT' WHEN 'G020' THEN 'DELL' WHEN 'G959' THEN 'XIAOMI' ELSE g.HIQ1_CUST_CD END as customer_name, g.HIQ1_APP_CD as app_type, g.AMT as performance_amount, g.ACTUAL as actual_rating, g.SCORE as performance_score, g.PLAN_QUARTER as quarter FROM QMS_GBW_VIEW g WHERE g.PLAN_QUARTER LIKE '2024%' AND g.HIQ1_APP_CD = 'SERVER' AND g.HIQ1_CUST_CD = 'G113' ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC FETCH FIRST 1000 ROWS ONLY;
2025-05-30 23:42:02,413 [INFO] data_manager:192 - SQL 실행 중: SELECT g.HIQ1_CUST_CD as customer_code, CASE g.HIQ1_CUST_CD WHEN 'G113' THEN 'GOOGLE' WHEN 'G150' THEN 'APPLE' WHEN 'G669' THEN 'AMD' WHEN 'G932' THEN 'AMAZON' WHEN 'G118' THEN 'HUAWEI' WHEN 'G010' THEN 'HP INC' WHEN 'G021' THEN 'ACER' WHEN 'G163' THEN 'MICROSOFT' WHEN 'G020' THEN 'DELL' WHEN 'G959' THEN 'XIAOMI' ELSE g.HIQ1_CUST_CD END as customer_name, g.HIQ1_APP_CD as app_type, g.AMT as performance_amount, g.ACTUAL as actual_rating, g.SCORE as performance_score, g.PLAN_QUARTER as quarter FROM QMS_GBW_VIEW g WHERE g.PLAN_QUARTER LIKE '2024%' AND g.HIQ1_APP_CD = 'SERVER' AND g.HIQ1_CUST_CD = 'G113' ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC FETCH FIRST 1000 ROWS ONLY;
2025-05-30 23:42:02,416 [ERROR] data_manager:203 - SQL 실행 오류: (oracledb.exceptions.DatabaseError) ORA-00933: SQL command not properly ended
[SQL: SELECT g.HIQ1_CUST_CD as customer_code, CASE g.HIQ1_CUST_CD WHEN 'G113' THEN 'GOOGLE' WHEN 'G150' THEN 'APPLE' WHEN 'G669' THEN 'AMD' WHEN 'G932' THEN 'AMAZON' WHEN 'G118' THEN 'HUAWEI' WHEN 'G010' THEN 'HP INC' WHEN 'G021' THEN 'ACER' WHEN 'G163' THEN 'MICROSOFT' WHEN 'G020' THEN 'DELL' WHEN 'G959' THEN 'XIAOMI' ELSE g.HIQ1_CUST_CD END as customer_name, g.HIQ1_APP_CD as app_type, g.AMT as performance_amount, g.ACTUAL as actual_rating, g.SCORE as performance_score, g.PLAN_QUARTER as quarter FROM QMS_GBW_VIEW g WHERE g.PLAN_QUARTER LIKE '2024%' AND g.HIQ1_APP_CD = 'SERVER' AND g.HIQ1_CUST_CD = 'G113' ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC FETCH FIRST 1000 ROWS ONLY;]
(Background on this error at: https://sqlalche.me/e/20/4xp6)
2025-05-30 23:42:02,418 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:42:02] "POST /이두원/modify_sql HTTP/1.1" 200 -
2025-05-30 23:47:33,957 [INFO] __main__:676 - Flask 애플리케이션 초기화 완료
2025-05-30 23:47:33,959 [INFO] werkzeug:97 - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-30 23:47:33,959 [INFO] werkzeug:97 - [33mPress CTRL+C to quit[0m
2025-05-30 23:47:36,387 [INFO] __main__:73 - 사용자 '이두원'가 접속했습니다.
2025-05-30 23:47:36,392 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:47:36] "GET /이두원 HTTP/1.1" 200 -
2025-05-30 23:47:36,419 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:47:36] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-05-30 23:47:36,451 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:47:36] "[36mGET /static/js/dataManager.js HTTP/1.1[0m" 304 -
2025-05-30 23:47:36,458 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:47:36] "[36mGET /static/js/uiController.js HTTP/1.1[0m" 304 -
2025-05-30 23:47:36,461 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:47:36] "[36mGET /static/js/chartManager.js HTTP/1.1[0m" 304 -
2025-05-30 23:47:36,461 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:47:36] "[36mGET /static/js/sessionHistory.js HTTP/1.1[0m" 304 -
2025-05-30 23:47:36,464 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:47:36] "[36mGET /static/js/modalManager.js HTTP/1.1[0m" 304 -
2025-05-30 23:47:36,474 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:47:36] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-05-30 23:47:36,542 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:47:36] "GET /이두원/get_predefined_queries HTTP/1.1" 200 -
2025-05-30 23:47:36,547 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:47:36] "[36mGET /favicon.ico HTTP/1.1[0m" 304 -
2025-05-30 23:47:37,742 [INFO] llm_manager:83 - API 클라이언트 초기화 완료
2025-05-30 23:47:37,743 [INFO] llm_manager:33 - LLM 매니저 초기화 완료 - 모드: api
2025-05-30 23:47:37,743 [INFO] data_manager:42 - 데이터 로드 중... Rating_Test_Data.csv
2025-05-30 23:47:37,745 [INFO] data_manager:45 - CSV 데이터 로드 완료: 108 행, 12 열
2025-05-30 23:47:37,745 [INFO] data_manager:50 - 메타데이터 로드 중... metadata.json
2025-05-30 23:47:37,745 [INFO] data_manager:54 - 메타데이터 로드 완료
2025-05-30 23:47:37,745 [INFO] data_manager:80 - Oracle 데이터베이스 설정 중...
2025-05-30 23:47:37,767 [INFO] data_manager:89 - Oracle 데이터베이스 연결 성공
2025-05-30 23:47:37,767 [INFO] data_manager:38 - 데이터 관리자 초기화 완료
2025-05-30 23:47:37,767 [INFO] chart_generator:78 - 차트 생성기 초기화 완료
2025-05-30 23:47:37,767 [INFO] main:78 - 차트 생성 애플리케이션 초기화 완료
2025-05-30 23:47:37,767 [INFO] main:90 - 미리 정의된 SQL 실행 시작: 'customer_performance_2024'
2025-05-30 23:47:37,767 [INFO] data_manager:184 - SQL 실행 중: 
                SELECT g.HIQ1_CUST_CD as customer_code,
                       CASE g.HIQ1_CUST_CD 
                           WHEN 'G113' THEN 'GOOGLE'
                           WHEN 'G150' THEN 'APPLE' 
                           WHEN 'G669' THEN 'AMD'
                           WHEN 'G932' THEN 'AMAZON'
                           WHEN 'G118' THEN 'HUAWEI'
                           WHEN 'G010' THEN 'HP INC'
                           WHEN 'G021' THEN 'ACER'
                           WHEN 'G163' THEN 'MICROSOFT'
                           WHEN 'G020' THEN 'DELL'
                           WHEN 'G959' THEN 'XIAOMI'
                           ELSE g.HIQ1_CUST_CD
                       END as customer_name,
                       g.HIQ1_APP_CD as app_type,
                       g.AMT as performance_amount,
                       g.ACTUAL as actual_rating,
                       g.SCORE as performance_score,
                       g.PLAN_QUARTER as quarter
                FROM QMS_GBW_VIEW g
                WHERE g.PLAN_QUARTER LIKE '2024%'
                ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC
            
2025-05-30 23:47:37,806 [INFO] data_manager:192 - SQL 실행 완료: 21 행, 7 열
2025-05-30 23:47:37,806 [INFO] main:101 - 미리 정의된 SQL 실행 완료: 'customer_performance_2024'
2025-05-30 23:47:37,806 [ERROR] main:141 - 미리 정의된 SQL 결과 저장 중 오류: name 'datetime' is not defined
2025-05-30 23:47:37,809 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:47:37] "POST /이두원/execute_predefined_query HTTP/1.1" 200 -
2025-05-30 23:47:46,119 [INFO] llm_manager:177 - API 요청 중... 엔드포인트: http://localhost:8000/v1/chat/completions
2025-05-30 23:47:51,852 [INFO] llm_manager:187 - API 응답 완료: 5.73초 소요
2025-05-30 23:47:51,853 [INFO] data_manager:141 - SQL 코드 블록에서 쿼리 추출 완료
2025-05-30 23:47:51,853 [INFO] data_manager:169 - 검증 및 수정된 SQL 쿼리: SELECT g.HIQ1_CUST_CD as customer_code, CASE g.HIQ1_CUST_CD WHEN 'G113' THEN 'GOOGLE' WHEN 'G150' THEN 'APPLE' WHEN 'G669' THEN 'AMD' WHEN 'G932' THEN 'AMAZON' WHEN 'G118' THEN 'HUAWEI' WHEN 'G010' THEN 'HP INC' WHEN 'G021' THEN 'ACER' WHEN 'G163' THEN 'MICROSOFT' WHEN 'G020' THEN 'DELL' WHEN 'G959' THEN 'XIAOMI' ELSE g.HIQ1_CUST_CD END as customer_name, g.HIQ1_APP_CD as app_type, g.AMT as performance_amount, g.ACTUAL as actual_rating, g.SCORE as performance_score, g.PLAN_QUARTER as quarter FROM QMS_GBW_VIEW g WHERE g.PLAN_QUARTER LIKE '2024%' AND g.HIQ1_APP_CD = 'SERVER' ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC FETCH FIRST 1000 ROWS ONLY
2025-05-30 23:47:51,853 [INFO] data_manager:184 - SQL 실행 중: SELECT g.HIQ1_CUST_CD as customer_code, CASE g.HIQ1_CUST_CD WHEN 'G113' THEN 'GOOGLE' WHEN 'G150' THEN 'APPLE' WHEN 'G669' THEN 'AMD' WHEN 'G932' THEN 'AMAZON' WHEN 'G118' THEN 'HUAWEI' WHEN 'G010' THEN 'HP INC' WHEN 'G021' THEN 'ACER' WHEN 'G163' THEN 'MICROSOFT' WHEN 'G020' THEN 'DELL' WHEN 'G959' THEN 'XIAOMI' ELSE g.HIQ1_CUST_CD END as customer_name, g.HIQ1_APP_CD as app_type, g.AMT as performance_amount, g.ACTUAL as actual_rating, g.SCORE as performance_score, g.PLAN_QUARTER as quarter FROM QMS_GBW_VIEW g WHERE g.PLAN_QUARTER LIKE '2024%' AND g.HIQ1_APP_CD = 'SERVER' ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC FETCH FIRST 1000 ROWS ONLY
2025-05-30 23:47:51,857 [INFO] data_manager:192 - SQL 실행 완료: 7 행, 7 열
2025-05-30 23:47:51,859 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:47:51] "POST /이두원/modify_sql HTTP/1.1" 200 -
2025-05-30 23:48:01,374 [INFO] llm_manager:177 - API 요청 중... 엔드포인트: http://localhost:8000/v1/chat/completions
2025-05-30 23:48:06,976 [INFO] llm_manager:187 - API 응답 완료: 5.60초 소요
2025-05-30 23:48:06,976 [INFO] data_manager:169 - 검증 및 수정된 SQL 쿼리: SELECT g.HIQ1_CUST_CD as customer_code, CASE g.HIQ1_CUST_CD WHEN 'G113' THEN 'GOOGLE' WHEN 'G150' THEN 'APPLE' WHEN 'G669' THEN 'AMD' WHEN 'G932' THEN 'AMAZON' WHEN 'G118' THEN 'HUAWEI' WHEN 'G010' THEN 'HP INC' WHEN 'G021' THEN 'ACER' WHEN 'G163' THEN 'MICROSOFT' WHEN 'G020' THEN 'DELL' WHEN 'G959' THEN 'XIAOMI' ELSE g.HIQ1_CUST_CD END as customer_name, g.HIQ1_APP_CD as app_type, g.AMT as performance_amount, g.ACTUAL as actual_rating, g.SCORE as performance_score, g.PLAN_QUARTER as quarter FROM QMS_GBW_VIEW g WHERE g.PLAN_QUARTER LIKE '2024%' AND g.HIQ1_APP_CD = 'SERVER' AND g.HIQ1_CUST_CD = 'G113' ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC FETCH FIRST 1000 ROWS ONLY
2025-05-30 23:48:06,976 [INFO] data_manager:184 - SQL 실행 중: SELECT g.HIQ1_CUST_CD as customer_code, CASE g.HIQ1_CUST_CD WHEN 'G113' THEN 'GOOGLE' WHEN 'G150' THEN 'APPLE' WHEN 'G669' THEN 'AMD' WHEN 'G932' THEN 'AMAZON' WHEN 'G118' THEN 'HUAWEI' WHEN 'G010' THEN 'HP INC' WHEN 'G021' THEN 'ACER' WHEN 'G163' THEN 'MICROSOFT' WHEN 'G020' THEN 'DELL' WHEN 'G959' THEN 'XIAOMI' ELSE g.HIQ1_CUST_CD END as customer_name, g.HIQ1_APP_CD as app_type, g.AMT as performance_amount, g.ACTUAL as actual_rating, g.SCORE as performance_score, g.PLAN_QUARTER as quarter FROM QMS_GBW_VIEW g WHERE g.PLAN_QUARTER LIKE '2024%' AND g.HIQ1_APP_CD = 'SERVER' AND g.HIQ1_CUST_CD = 'G113' ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC FETCH FIRST 1000 ROWS ONLY
2025-05-30 23:48:07,012 [INFO] data_manager:192 - SQL 실행 완료: 1 행, 7 열
2025-05-30 23:48:07,014 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:48:07] "POST /이두원/modify_sql HTTP/1.1" 200 -
2025-05-30 23:48:30,019 [INFO] main:90 - 미리 정의된 SQL 실행 시작: 'quarterly_amt_analysis'
2025-05-30 23:48:30,019 [INFO] data_manager:184 - SQL 실행 중: 
                SELECT g.PLAN_QUARTER as quarter,
                       g.HIQ1_APP_CD as app_type,
                       COUNT(*) as customer_count,
                       SUM(g.AMT) as total_amount,
                       AVG(g.AMT) as avg_amount,
                       MAX(g.AMT) as max_amount,
                       MIN(g.AMT) as min_amount,
                       ROUND(AVG(TO_NUMBER(g.SCORE)), 2) as avg_score
                FROM QMS_GBW_VIEW g
                WHERE g.AMT IS NOT NULL
                GROUP BY g.PLAN_QUARTER, g.HIQ1_APP_CD
                ORDER BY g.PLAN_QUARTER DESC, total_amount DESC
            
2025-05-30 23:48:30,024 [INFO] data_manager:192 - SQL 실행 완료: 6 행, 8 열
2025-05-30 23:48:30,024 [INFO] main:101 - 미리 정의된 SQL 실행 완료: 'quarterly_amt_analysis'
2025-05-30 23:48:30,024 [ERROR] main:141 - 미리 정의된 SQL 결과 저장 중 오류: name 'datetime' is not defined
2025-05-30 23:48:30,026 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:48:30] "POST /이두원/execute_predefined_query HTTP/1.1" 200 -
2025-05-30 23:49:20,407 [INFO] main:90 - 미리 정의된 SQL 실행 시작: 'expected_rating'
2025-05-30 23:49:20,407 [INFO] data_manager:184 - SQL 실행 중: 
                SELECT r.HIQ1_CUST_CD as customer_code,
                       CASE r.HIQ1_CUST_CD 
                           WHEN 'G113' THEN 'GOOGLE'
                           WHEN 'G150' THEN 'APPLE' 
                           WHEN 'G669' THEN 'AMD'
                           WHEN 'G932' THEN 'AMAZON'
                           WHEN 'G118' THEN 'HUAWEI'
                           WHEN 'G010' THEN 'HP INC'
                           WHEN 'G021' THEN 'ACER'
                           WHEN 'G163' THEN 'MICROSOFT'
                           WHEN 'G020' THEN 'DELL'
                           WHEN 'G959' THEN 'XIAOMI'
                           ELSE r.HIQ1_CUST_CD
                       END as customer_name,
                       r.HIQ1_APP_CD as app_type,
                       r.YM_QT as quarter,
                       r.FORECAST as expected_rating,
                       r.REVENUE as revenue_rating,
                       r.EXPECTED_DATE as expected_date
                FROM QMS_RAT_YMQT_N r
                WHERE r.FORECAST IS NOT NULL
                ORDER BY r.EXPECTED_DATE DESC, r.YM_QT DESC
            
2025-05-30 23:49:20,412 [INFO] data_manager:192 - SQL 실행 완료: 48 행, 7 열
2025-05-30 23:49:20,412 [INFO] main:101 - 미리 정의된 SQL 실행 완료: 'expected_rating'
2025-05-30 23:49:20,412 [ERROR] main:141 - 미리 정의된 SQL 결과 저장 중 오류: name 'datetime' is not defined
2025-05-30 23:49:20,414 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:49:20] "POST /이두원/execute_predefined_query HTTP/1.1" 200 -
2025-05-30 23:49:40,332 [INFO] llm_manager:177 - API 요청 중... 엔드포인트: http://localhost:8000/v1/chat/completions
2025-05-30 23:49:46,146 [INFO] llm_manager:187 - API 응답 완료: 5.81초 소요
2025-05-30 23:49:46,146 [INFO] data_manager:141 - SQL 코드 블록에서 쿼리 추출 완료
2025-05-30 23:49:46,146 [INFO] data_manager:169 - 검증 및 수정된 SQL 쿼리: SELECT r.HIQ1_CUST_CD as customer_code, CASE r.HIQ1_CUST_CD WHEN 'G113' THEN 'GOOGLE' WHEN 'G150' THEN 'APPLE' WHEN 'G669' THEN 'AMD' WHEN 'G932' THEN 'AMAZON' WHEN 'G118' THEN 'HUAWEI' WHEN 'G010' THEN 'HP INC' WHEN 'G021' THEN 'ACER' WHEN 'G163' THEN 'MICROSOFT' WHEN 'G020' THEN 'DELL' WHEN 'G959' THEN 'XIAOMI' ELSE r.HIQ1_CUST_CD END as customer_name, r.HIQ1_APP_CD as app_type, r.YM_QT as quarter, r.FORECAST as expected_rating, r.REVENUE as revenue_rating, r.EXPECTED_DATE as expected_date FROM QMS_RAT_YMQT_N r WHERE r.FORECAST IS NOT NULL AND r.HIQ1_APP_CD = 'HBM' ORDER BY r.EXPECTED_DATE DESC, r.YM_QT DESC FETCH FIRST 1000 ROWS ONLY
2025-05-30 23:49:46,146 [INFO] data_manager:184 - SQL 실행 중: SELECT r.HIQ1_CUST_CD as customer_code, CASE r.HIQ1_CUST_CD WHEN 'G113' THEN 'GOOGLE' WHEN 'G150' THEN 'APPLE' WHEN 'G669' THEN 'AMD' WHEN 'G932' THEN 'AMAZON' WHEN 'G118' THEN 'HUAWEI' WHEN 'G010' THEN 'HP INC' WHEN 'G021' THEN 'ACER' WHEN 'G163' THEN 'MICROSOFT' WHEN 'G020' THEN 'DELL' WHEN 'G959' THEN 'XIAOMI' ELSE r.HIQ1_CUST_CD END as customer_name, r.HIQ1_APP_CD as app_type, r.YM_QT as quarter, r.FORECAST as expected_rating, r.REVENUE as revenue_rating, r.EXPECTED_DATE as expected_date FROM QMS_RAT_YMQT_N r WHERE r.FORECAST IS NOT NULL AND r.HIQ1_APP_CD = 'HBM' ORDER BY r.EXPECTED_DATE DESC, r.YM_QT DESC FETCH FIRST 1000 ROWS ONLY
2025-05-30 23:49:46,155 [INFO] data_manager:192 - SQL 실행 완료: 16 행, 7 열
2025-05-30 23:49:46,157 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:49:46] "POST /이두원/modify_sql HTTP/1.1" 200 -
2025-05-30 23:50:05,545 [INFO] llm_manager:177 - API 요청 중... 엔드포인트: http://localhost:8000/v1/chat/completions
2025-05-30 23:50:11,250 [INFO] llm_manager:187 - API 응답 완료: 5.70초 소요
2025-05-30 23:50:11,251 [INFO] data_manager:169 - 검증 및 수정된 SQL 쿼리: SELECT r.HIQ1_CUST_CD as customer_code, CASE r.HIQ1_CUST_CD WHEN 'G113' THEN 'GOOGLE' WHEN 'G150' THEN 'APPLE' WHEN 'G669' THEN 'AMD' WHEN 'G932' THEN 'AMAZON' WHEN 'G118' THEN 'HUAWEI' WHEN 'G010' THEN 'HP INC' WHEN 'G021' THEN 'ACER' WHEN 'G163' THEN 'MICROSOFT' WHEN 'G020' THEN 'DELL' WHEN 'G959' THEN 'XIAOMI' ELSE r.HIQ1_CUST_CD END as customer_name, r.HIQ1_APP_CD as app_type, r.YM_QT as quarter, r.FORECAST as expected_rating, r.REVENUE as revenue_rating, r.EXPECTED_DATE as expected_date FROM QMS_RAT_YMQT_N r WHERE r.FORECAST IS NOT NULL AND r.HIQ1_APP_CD = 'HBM' AND r.HIQ1_CUST_CD = 'G932' ORDER BY r.EXPECTED_DATE DESC, r.YM_QT DESC FETCH FIRST 1000 ROWS ONLY
2025-05-30 23:50:11,251 [INFO] data_manager:184 - SQL 실행 중: SELECT r.HIQ1_CUST_CD as customer_code, CASE r.HIQ1_CUST_CD WHEN 'G113' THEN 'GOOGLE' WHEN 'G150' THEN 'APPLE' WHEN 'G669' THEN 'AMD' WHEN 'G932' THEN 'AMAZON' WHEN 'G118' THEN 'HUAWEI' WHEN 'G010' THEN 'HP INC' WHEN 'G021' THEN 'ACER' WHEN 'G163' THEN 'MICROSOFT' WHEN 'G020' THEN 'DELL' WHEN 'G959' THEN 'XIAOMI' ELSE r.HIQ1_CUST_CD END as customer_name, r.HIQ1_APP_CD as app_type, r.YM_QT as quarter, r.FORECAST as expected_rating, r.REVENUE as revenue_rating, r.EXPECTED_DATE as expected_date FROM QMS_RAT_YMQT_N r WHERE r.FORECAST IS NOT NULL AND r.HIQ1_APP_CD = 'HBM' AND r.HIQ1_CUST_CD = 'G932' ORDER BY r.EXPECTED_DATE DESC, r.YM_QT DESC FETCH FIRST 1000 ROWS ONLY
2025-05-30 23:50:11,259 [INFO] data_manager:192 - SQL 실행 완료: 2 행, 7 열
2025-05-30 23:50:11,261 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:50:11] "POST /이두원/modify_sql HTTP/1.1" 200 -
2025-05-30 23:50:34,214 [INFO] main:204 - 차트 처리 시작: '실제 레이팅 차이를 바차트로 보여줘'
2025-05-30 23:50:34,215 [INFO] chart_generator:92 - 차트 JSON 생성 중...
2025-05-30 23:50:34,217 [INFO] llm_manager:177 - API 요청 중... 엔드포인트: http://localhost:8000/v1/chat/completions
2025-05-30 23:50:42,295 [INFO] llm_manager:187 - API 응답 완료: 8.08초 소요
2025-05-30 23:50:42,296 [INFO] chart_generator:108 - 차트 JSON 생성 완료: bar 차트
2025-05-30 23:50:42,296 [INFO] chart_generator:217 - 차트 생성 시작: bar 차트
2025-05-30 23:50:42,543 [INFO] chart_generator:265 - 차트 생성 완료: ./chart_outputs/이두원/bar_1748616642.png
2025-05-30 23:50:42,546 [INFO] main:235 - 차트 처리 완료
2025-05-30 23:50:42,547 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:50:42] "POST /이두원/generate_chart HTTP/1.1" 200 -
2025-05-30 23:52:59,587 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:52:59] "GET /이두원/get_json_data/ HTTP/1.1" 200 -
2025-05-30 23:53:03,826 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:53:03] "GET /이두원/get_history HTTP/1.1" 200 -
2025-05-30 23:53:05,600 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:53:05] "[33mGET /이두원/get_files?folder=results_1748616642 HTTP/1.1[0m" 404 -
2025-05-30 23:54:37,109 [INFO] __main__:641 - Flask 애플리케이션 초기화 완료
2025-05-30 23:54:37,110 [INFO] werkzeug:97 - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-30 23:54:37,111 [INFO] werkzeug:97 - [33mPress CTRL+C to quit[0m
2025-05-30 23:54:39,453 [INFO] __main__:73 - 사용자 '이두원'가 접속했습니다.
2025-05-30 23:54:39,458 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:54:39] "GET /이두원 HTTP/1.1" 200 -
2025-05-30 23:54:39,486 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:54:39] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-05-30 23:54:39,517 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:54:39] "[36mGET /static/js/dataManager.js HTTP/1.1[0m" 304 -
2025-05-30 23:54:39,518 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:54:39] "[36mGET /static/js/sessionHistory.js HTTP/1.1[0m" 304 -
2025-05-30 23:54:39,525 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:54:39] "[36mGET /static/js/chartManager.js HTTP/1.1[0m" 304 -
2025-05-30 23:54:39,525 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:54:39] "[36mGET /static/js/modalManager.js HTTP/1.1[0m" 304 -
2025-05-30 23:54:39,526 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:54:39] "[36mGET /static/js/uiController.js HTTP/1.1[0m" 304 -
2025-05-30 23:54:39,562 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:54:39] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-05-30 23:54:39,631 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:54:39] "GET /이두원/get_predefined_queries HTTP/1.1" 200 -
2025-05-30 23:54:39,638 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:54:39] "[36mGET /favicon.ico HTTP/1.1[0m" 304 -
2025-05-30 23:54:41,967 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:54:41] "GET /이두원/get_history HTTP/1.1" 200 -
2025-05-30 23:54:43,286 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:54:43] "[31m[1mGET /이두원/get_files?folder=results_1748616642 HTTP/1.1[0m" 400 -
2025-05-30 23:57:46,143 [INFO] __main__:656 - Flask 애플리케이션 초기화 완료
2025-05-30 23:57:46,145 [INFO] werkzeug:97 - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-30 23:57:46,145 [INFO] werkzeug:97 - [33mPress CTRL+C to quit[0m
2025-05-30 23:57:49,454 [INFO] __main__:73 - 사용자 '이두원'가 접속했습니다.
2025-05-30 23:57:49,460 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:57:49] "GET /이두원 HTTP/1.1" 200 -
2025-05-30 23:57:49,485 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:57:49] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-05-30 23:57:49,531 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:57:49] "[36mGET /static/js/chartManager.js HTTP/1.1[0m" 304 -
2025-05-30 23:57:49,533 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:57:49] "[36mGET /static/js/modalManager.js HTTP/1.1[0m" 304 -
2025-05-30 23:57:49,533 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:57:49] "[36mGET /static/js/sessionHistory.js HTTP/1.1[0m" 304 -
2025-05-30 23:57:49,537 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:57:49] "[36mGET /static/js/dataManager.js HTTP/1.1[0m" 304 -
2025-05-30 23:57:49,538 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:57:49] "[36mGET /static/js/uiController.js HTTP/1.1[0m" 304 -
2025-05-30 23:57:49,544 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:57:49] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-05-30 23:57:49,613 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:57:49] "[36mGET /favicon.ico HTTP/1.1[0m" 304 -
2025-05-30 23:57:49,619 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:57:49] "GET /이두원/get_predefined_queries HTTP/1.1" 200 -
2025-05-30 23:57:52,081 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:57:52] "GET /이두원/get_history HTTP/1.1" 200 -
2025-05-30 23:57:53,465 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:57:53] "GET /이두원/get_files?folder=results_1748616642 HTTP/1.1" 200 -
2025-05-30 23:57:56,557 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:57:56] "[33mGET /이두원/get_file?folder=results_1748616642&file=sql_query.sql HTTP/1.1[0m" 404 -
2025-05-30 23:58:07,672 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:58:07] "[33mGET /이두원/get_file?folder=results_1748616642&file=result_data.csv HTTP/1.1[0m" 404 -
2025-05-30 23:58:08,374 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:58:08] "[33mGET /이두원/get_file?folder=results_1748616642&file=chart_json.json HTTP/1.1[0m" 404 -
2025-05-30 23:58:13,919 [INFO] werkzeug:97 - 127.0.0.1 - - [30/May/2025 23:58:13] "[33mGET /이두원/get_file?folder=results_1748616642&file=bar_1748616642.png HTTP/1.1[0m" 404 -
2025-05-31 00:00:26,097 [INFO] __main__:656 - Flask 애플리케이션 초기화 완료
2025-05-31 00:00:26,099 [INFO] werkzeug:97 - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-31 00:00:26,099 [INFO] werkzeug:97 - [33mPress CTRL+C to quit[0m
2025-05-31 00:00:29,045 [INFO] __main__:73 - 사용자 '이두원'가 접속했습니다.
2025-05-31 00:00:29,050 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:00:29] "GET /이두원 HTTP/1.1" 200 -
2025-05-31 00:00:29,073 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:00:29] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-05-31 00:00:29,103 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:00:29] "[36mGET /static/js/sessionHistory.js HTTP/1.1[0m" 304 -
2025-05-31 00:00:29,104 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:00:29] "[36mGET /static/js/dataManager.js HTTP/1.1[0m" 304 -
2025-05-31 00:00:29,109 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:00:29] "[36mGET /static/js/chartManager.js HTTP/1.1[0m" 304 -
2025-05-31 00:00:29,110 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:00:29] "[36mGET /static/js/uiController.js HTTP/1.1[0m" 304 -
2025-05-31 00:00:29,111 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:00:29] "GET /static/js/modalManager.js HTTP/1.1" 200 -
2025-05-31 00:00:29,155 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:00:29] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-05-31 00:00:29,213 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:00:29] "GET /이두원/get_predefined_queries HTTP/1.1" 200 -
2025-05-31 00:00:29,219 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:00:29] "[36mGET /favicon.ico HTTP/1.1[0m" 304 -
2025-05-31 00:00:31,333 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:00:31] "GET /이두원/get_history HTTP/1.1" 200 -
2025-05-31 00:00:32,418 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:00:32] "GET /이두원/get_files?folder=results_1748616642 HTTP/1.1" 200 -
2025-05-31 00:00:33,474 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:00:33] "GET /이두원/get_files?folder=results_1748616642&file=sql_query.sql HTTP/1.1" 200 -
2025-05-31 00:00:35,583 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:00:35] "GET /이두원/get_files?folder=results_1748616642&file=result_data.csv HTTP/1.1" 200 -
2025-05-31 00:00:37,227 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:00:37] "GET /이두원/get_files?folder=results_1748616642&file=chart_json.json HTTP/1.1" 200 -
2025-05-31 00:00:46,628 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:00:46] "[33mGET /이두원/get_file?folder=results_1748616642&file=bar_1748616642.png HTTP/1.1[0m" 404 -
2025-05-31 00:00:55,023 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:00:55] "GET /이두원/get_files?folder=results_1748616642&file=info.json HTTP/1.1" 200 -
2025-05-31 00:01:15,534 [INFO] __main__:656 - Flask 애플리케이션 초기화 완료
2025-05-31 00:01:15,536 [INFO] werkzeug:97 - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-31 00:01:15,536 [INFO] werkzeug:97 - [33mPress CTRL+C to quit[0m
2025-05-31 00:01:17,314 [INFO] __main__:73 - 사용자 '이두원'가 접속했습니다.
2025-05-31 00:01:17,320 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:17] "GET /이두원 HTTP/1.1" 200 -
2025-05-31 00:01:17,344 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:17] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-05-31 00:01:17,377 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:17] "[36mGET /static/js/dataManager.js HTTP/1.1[0m" 304 -
2025-05-31 00:01:17,378 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:17] "[36mGET /static/js/uiController.js HTTP/1.1[0m" 304 -
2025-05-31 00:01:17,381 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:17] "GET /static/js/modalManager.js HTTP/1.1" 200 -
2025-05-31 00:01:17,382 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:17] "[36mGET /static/js/sessionHistory.js HTTP/1.1[0m" 304 -
2025-05-31 00:01:17,382 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:17] "[36mGET /static/js/chartManager.js HTTP/1.1[0m" 304 -
2025-05-31 00:01:17,384 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:17] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-05-31 00:01:17,485 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:17] "GET /이두원/get_predefined_queries HTTP/1.1" 200 -
2025-05-31 00:01:17,491 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:17] "[36mGET /favicon.ico HTTP/1.1[0m" 304 -
2025-05-31 00:01:19,152 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:19] "GET /이두원/get_history HTTP/1.1" 200 -
2025-05-31 00:01:20,194 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:20] "GET /이두원/get_files?folder=results_1748616642 HTTP/1.1" 200 -
2025-05-31 00:01:21,105 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:21] "GET /이두원/get_files?folder=results_1748616642&file=chart_json.json HTTP/1.1" 200 -
2025-05-31 00:01:23,321 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:23] "GET /이두원/get_files?folder=results_1748616642&file=bar_1748616642.png HTTP/1.1" 200 -
2025-05-31 00:01:36,727 [INFO] __main__:73 - 사용자 '이두원'가 접속했습니다.
2025-05-31 00:01:36,728 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:36] "GET /이두원 HTTP/1.1" 200 -
2025-05-31 00:01:36,755 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:36] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-05-31 00:01:36,795 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:36] "[36mGET /static/js/sessionHistory.js HTTP/1.1[0m" 304 -
2025-05-31 00:01:36,796 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:36] "[36mGET /static/js/modalManager.js HTTP/1.1[0m" 304 -
2025-05-31 00:01:36,803 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:36] "[36mGET /static/js/chartManager.js HTTP/1.1[0m" 304 -
2025-05-31 00:01:36,804 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:36] "[36mGET /static/js/dataManager.js HTTP/1.1[0m" 304 -
2025-05-31 00:01:36,805 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:36] "[36mGET /static/js/uiController.js HTTP/1.1[0m" 304 -
2025-05-31 00:01:36,806 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:36] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-05-31 00:01:36,881 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:36] "GET /이두원/get_predefined_queries HTTP/1.1" 200 -
2025-05-31 00:01:36,887 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:36] "[36mGET /favicon.ico HTTP/1.1[0m" 304 -
2025-05-31 00:01:38,561 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:38] "GET /이두원/get_json_data/ HTTP/1.1" 200 -
2025-05-31 00:01:41,776 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:41] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-05-31 00:01:41,781 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:41] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-05-31 00:01:44,576 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:01:44] "GET /이두원/get_json_data/ HTTP/1.1" 200 -
2025-05-31 00:05:02,528 [INFO] __main__:656 - Flask 애플리케이션 초기화 완료
2025-05-31 00:05:02,530 [INFO] werkzeug:97 - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-31 00:05:02,530 [INFO] werkzeug:97 - [33mPress CTRL+C to quit[0m
2025-05-31 00:05:06,016 [INFO] __main__:73 - 사용자 '이두원'가 접속했습니다.
2025-05-31 00:05:06,021 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:06] "GET /이두원 HTTP/1.1" 200 -
2025-05-31 00:05:06,050 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:06] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-05-31 00:05:06,093 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:06] "[36mGET /static/js/dataManager.js HTTP/1.1[0m" 304 -
2025-05-31 00:05:06,096 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:06] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-05-31 00:05:06,097 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:06] "[36mGET /static/js/chartManager.js HTTP/1.1[0m" 304 -
2025-05-31 00:05:06,097 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:06] "[36mGET /static/js/sessionHistory.js HTTP/1.1[0m" 304 -
2025-05-31 00:05:06,098 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:06] "[36mGET /static/js/uiController.js HTTP/1.1[0m" 304 -
2025-05-31 00:05:06,101 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:06] "GET /static/js/modalManager.js HTTP/1.1" 200 -
2025-05-31 00:05:06,175 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:06] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-05-31 00:05:06,283 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:06] "GET /이두원/get_predefined_queries HTTP/1.1" 200 -
2025-05-31 00:05:06,290 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:06] "[36mGET /favicon.ico HTTP/1.1[0m" 304 -
2025-05-31 00:05:07,657 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:07] "GET /이두원/get_json_data/ HTTP/1.1" 200 -
2025-05-31 00:05:25,985 [INFO] __main__:656 - Flask 애플리케이션 초기화 완료
2025-05-31 00:05:25,986 [INFO] werkzeug:97 - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-31 00:05:25,986 [INFO] werkzeug:97 - [33mPress CTRL+C to quit[0m
2025-05-31 00:05:27,952 [INFO] __main__:73 - 사용자 '이두원'가 접속했습니다.
2025-05-31 00:05:27,958 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:27] "GET /이두원 HTTP/1.1" 200 -
2025-05-31 00:05:27,983 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:27] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-05-31 00:05:28,008 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:28] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-05-31 00:05:28,019 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:28] "[36mGET /static/js/chartManager.js HTTP/1.1[0m" 304 -
2025-05-31 00:05:28,020 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:28] "[36mGET /static/js/sessionHistory.js HTTP/1.1[0m" 304 -
2025-05-31 00:05:28,021 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:28] "[36mGET /static/js/dataManager.js HTTP/1.1[0m" 304 -
2025-05-31 00:05:28,022 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:28] "[36mGET /static/js/uiController.js HTTP/1.1[0m" 304 -
2025-05-31 00:05:28,028 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:28] "GET /static/js/modalManager.js HTTP/1.1" 200 -
2025-05-31 00:05:28,102 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:28] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-05-31 00:05:28,170 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:28] "GET /이두원/get_predefined_queries HTTP/1.1" 200 -
2025-05-31 00:05:28,176 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:28] "[36mGET /favicon.ico HTTP/1.1[0m" 304 -
2025-05-31 00:05:29,481 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:29] "GET /이두원/get_json_data/ HTTP/1.1" 200 -
2025-05-31 00:05:45,835 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:45] "GET /이두원/get_history HTTP/1.1" 200 -
2025-05-31 00:05:47,317 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:47] "GET /이두원/get_files?folder=results_1748616642 HTTP/1.1" 200 -
2025-05-31 00:05:48,395 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:48] "GET /이두원/get_files?folder=results_1748616642&file=chart_json.json HTTP/1.1" 200 -
2025-05-31 00:05:51,908 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:05:51] "GET /이두원/get_files?folder=results_1748616642&file=chart_json.json HTTP/1.1" 200 -
2025-05-31 00:08:33,485 [INFO] __main__:656 - Flask 애플리케이션 초기화 완료
2025-05-31 00:08:33,487 [INFO] werkzeug:97 - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-31 00:08:33,487 [INFO] werkzeug:97 - [33mPress CTRL+C to quit[0m
2025-05-31 00:08:36,642 [INFO] __main__:73 - 사용자 '이두원'가 접속했습니다.
2025-05-31 00:08:36,648 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:08:36] "GET /이두원 HTTP/1.1" 200 -
2025-05-31 00:08:36,673 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:08:36] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-05-31 00:08:36,700 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:08:36] "[36mGET /static/js/dataManager.js HTTP/1.1[0m" 304 -
2025-05-31 00:08:36,701 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:08:36] "[36mGET /static/js/sessionHistory.js HTTP/1.1[0m" 304 -
2025-05-31 00:08:36,715 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:08:36] "GET /static/js/modalManager.js HTTP/1.1" 200 -
2025-05-31 00:08:36,717 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:08:36] "[36mGET /static/js/chartManager.js HTTP/1.1[0m" 304 -
2025-05-31 00:08:36,717 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:08:36] "[36mGET /static/js/uiController.js HTTP/1.1[0m" 304 -
2025-05-31 00:08:36,721 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:08:36] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-05-31 00:08:36,762 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:08:36] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-05-31 00:08:36,793 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:08:36] "GET /이두원/get_predefined_queries HTTP/1.1" 200 -
2025-05-31 00:08:36,800 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:08:36] "[36mGET /favicon.ico HTTP/1.1[0m" 304 -
2025-05-31 00:08:39,013 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:08:39] "GET /이두원/get_history HTTP/1.1" 200 -
2025-05-31 00:08:40,061 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:08:40] "GET /이두원/get_files?folder=results_1748616642 HTTP/1.1" 200 -
2025-05-31 00:08:40,995 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:08:40] "GET /이두원/get_files?folder=results_1748616642&file=info.json HTTP/1.1" 200 -
2025-05-31 00:08:45,144 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:08:45] "GET /이두원/get_files?folder=results_1748616642&file=chart_json.json HTTP/1.1" 200 -
2025-05-31 00:09:23,867 [INFO] llm_manager:83 - API 클라이언트 초기화 완료
2025-05-31 00:09:23,867 [INFO] llm_manager:33 - LLM 매니저 초기화 완료 - 모드: api
2025-05-31 00:09:23,868 [INFO] data_manager:42 - 데이터 로드 중... Rating_Test_Data.csv
2025-05-31 00:09:23,870 [INFO] data_manager:45 - CSV 데이터 로드 완료: 108 행, 12 열
2025-05-31 00:09:23,870 [INFO] data_manager:50 - 메타데이터 로드 중... metadata.json
2025-05-31 00:09:23,870 [INFO] data_manager:54 - 메타데이터 로드 완료
2025-05-31 00:09:23,870 [INFO] data_manager:80 - Oracle 데이터베이스 설정 중...
2025-05-31 00:09:23,892 [INFO] data_manager:89 - Oracle 데이터베이스 연결 성공
2025-05-31 00:09:23,892 [INFO] data_manager:38 - 데이터 관리자 초기화 완료
2025-05-31 00:09:23,892 [INFO] chart_generator:78 - 차트 생성기 초기화 완료
2025-05-31 00:09:23,892 [INFO] main:78 - 차트 생성 애플리케이션 초기화 완료
2025-05-31 00:09:23,892 [INFO] main:90 - 미리 정의된 SQL 실행 시작: 'actual_rating'
2025-05-31 00:09:23,892 [INFO] data_manager:184 - SQL 실행 중: 
                SELECT r.HIQ1_CUST_CD as customer_code,
                       CASE r.HIQ1_CUST_CD 
                           WHEN 'G113' THEN 'GOOGLE'
                           WHEN 'G150' THEN 'APPLE' 
                           WHEN 'G669' THEN 'AMD'
                           WHEN 'G932' THEN 'AMAZON'
                           WHEN 'G118' THEN 'HUAWEI'
                           WHEN 'G010' THEN 'HP INC'
                           WHEN 'G021' THEN 'ACER'
                           WHEN 'G163' THEN 'MICROSOFT'
                           WHEN 'G020' THEN 'DELL'
                           WHEN 'G959' THEN 'XIAOMI'
                           ELSE r.HIQ1_CUST_CD
                       END as customer_name,
                       r.HIQ1_APP_CD as app_type,
                       r.YM_QT as quarter,
                       r.ACTUAL as actual_rating,
                       r.SCORE as score,
                       r.EXPECTED_DATE as expected_date
                FROM QMS_RAT_YMQT_N r
                WHERE r.ACTUAL IS NOT NULL
                ORDER BY r.YM_QT DESC, TO_NUMBER(r.SCORE) DESC
            
2025-05-31 00:09:23,932 [INFO] data_manager:192 - SQL 실행 완료: 48 행, 7 열
2025-05-31 00:09:23,932 [INFO] main:101 - 미리 정의된 SQL 실행 완료: 'actual_rating'
2025-05-31 00:09:23,932 [ERROR] main:141 - 미리 정의된 SQL 결과 저장 중 오류: name 'datetime' is not defined
2025-05-31 00:09:23,936 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:09:23] "POST /이두원/execute_predefined_query HTTP/1.1" 200 -
2025-05-31 00:09:28,075 [INFO] main:90 - 미리 정의된 SQL 실행 시작: 'expected_rating'
2025-05-31 00:09:28,075 [INFO] data_manager:184 - SQL 실행 중: 
                SELECT r.HIQ1_CUST_CD as customer_code,
                       CASE r.HIQ1_CUST_CD 
                           WHEN 'G113' THEN 'GOOGLE'
                           WHEN 'G150' THEN 'APPLE' 
                           WHEN 'G669' THEN 'AMD'
                           WHEN 'G932' THEN 'AMAZON'
                           WHEN 'G118' THEN 'HUAWEI'
                           WHEN 'G010' THEN 'HP INC'
                           WHEN 'G021' THEN 'ACER'
                           WHEN 'G163' THEN 'MICROSOFT'
                           WHEN 'G020' THEN 'DELL'
                           WHEN 'G959' THEN 'XIAOMI'
                           ELSE r.HIQ1_CUST_CD
                       END as customer_name,
                       r.HIQ1_APP_CD as app_type,
                       r.YM_QT as quarter,
                       r.FORECAST as expected_rating,
                       r.REVENUE as revenue_rating,
                       r.EXPECTED_DATE as expected_date
                FROM QMS_RAT_YMQT_N r
                WHERE r.FORECAST IS NOT NULL
                ORDER BY r.EXPECTED_DATE DESC, r.YM_QT DESC
            
2025-05-31 00:09:28,079 [INFO] data_manager:192 - SQL 실행 완료: 48 행, 7 열
2025-05-31 00:09:28,080 [INFO] main:101 - 미리 정의된 SQL 실행 완료: 'expected_rating'
2025-05-31 00:09:28,080 [ERROR] main:141 - 미리 정의된 SQL 결과 저장 중 오류: name 'datetime' is not defined
2025-05-31 00:09:28,082 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:09:28] "POST /이두원/execute_predefined_query HTTP/1.1" 200 -
2025-05-31 00:09:32,919 [INFO] main:90 - 미리 정의된 SQL 실행 시작: 'customer_performance_2024'
2025-05-31 00:09:32,919 [INFO] data_manager:184 - SQL 실행 중: 
                SELECT g.HIQ1_CUST_CD as customer_code,
                       CASE g.HIQ1_CUST_CD 
                           WHEN 'G113' THEN 'GOOGLE'
                           WHEN 'G150' THEN 'APPLE' 
                           WHEN 'G669' THEN 'AMD'
                           WHEN 'G932' THEN 'AMAZON'
                           WHEN 'G118' THEN 'HUAWEI'
                           WHEN 'G010' THEN 'HP INC'
                           WHEN 'G021' THEN 'ACER'
                           WHEN 'G163' THEN 'MICROSOFT'
                           WHEN 'G020' THEN 'DELL'
                           WHEN 'G959' THEN 'XIAOMI'
                           ELSE g.HIQ1_CUST_CD
                       END as customer_name,
                       g.HIQ1_APP_CD as app_type,
                       g.AMT as performance_amount,
                       g.ACTUAL as actual_rating,
                       g.SCORE as performance_score,
                       g.PLAN_QUARTER as quarter
                FROM QMS_GBW_VIEW g
                WHERE g.PLAN_QUARTER LIKE '2024%'
                ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC
            
2025-05-31 00:09:32,923 [INFO] data_manager:192 - SQL 실행 완료: 21 행, 7 열
2025-05-31 00:09:32,923 [INFO] main:101 - 미리 정의된 SQL 실행 완료: 'customer_performance_2024'
2025-05-31 00:09:32,924 [ERROR] main:141 - 미리 정의된 SQL 결과 저장 중 오류: name 'datetime' is not defined
2025-05-31 00:09:32,925 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:09:32] "POST /이두원/execute_predefined_query HTTP/1.1" 200 -
2025-05-31 00:16:42,918 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:16:42] "GET /이두원/get_history HTTP/1.1" 200 -
2025-05-31 00:16:46,242 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:16:46] "DELETE /이두원/delete_folder?folder=results_1748616642 HTTP/1.1" 200 -
2025-05-31 00:16:46,335 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:16:46] "GET /이두원/get_history HTTP/1.1" 200 -
2025-05-31 00:16:48,811 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:16:48] "DELETE /이두원/delete_folder?folder=results_1748616642 HTTP/1.1" 200 -
2025-05-31 00:16:48,909 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:16:48] "GET /이두원/get_history HTTP/1.1" 200 -
2025-05-31 00:16:54,353 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:16:54] "DELETE /이두원/delete_folder?folder=results_1748616642 HTTP/1.1" 200 -
2025-05-31 00:16:54,481 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:16:54] "GET /이두원/get_history HTTP/1.1" 200 -
2025-05-31 00:16:56,639 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:16:56] "GET /이두원/get_history HTTP/1.1" 200 -
2025-05-31 00:17:00,657 [INFO] __main__:73 - 사용자 '이두원'가 접속했습니다.
2025-05-31 00:17:00,658 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:17:00] "GET /이두원 HTTP/1.1" 200 -
2025-05-31 00:17:00,681 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:17:00] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-05-31 00:17:00,728 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:17:00] "[36mGET /static/js/modalManager.js HTTP/1.1[0m" 304 -
2025-05-31 00:17:00,730 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:17:00] "[36mGET /static/js/dataManager.js HTTP/1.1[0m" 304 -
2025-05-31 00:17:00,731 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:17:00] "[36mGET /static/js/sessionHistory.js HTTP/1.1[0m" 304 -
2025-05-31 00:17:00,735 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:17:00] "[36mGET /static/js/uiController.js HTTP/1.1[0m" 304 -
2025-05-31 00:17:00,735 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:17:00] "[36mGET /static/js/chartManager.js HTTP/1.1[0m" 304 -
2025-05-31 00:17:00,741 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:17:00] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-05-31 00:17:00,805 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:17:00] "GET /이두원/get_predefined_queries HTTP/1.1" 200 -
2025-05-31 00:17:00,812 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:17:00] "[36mGET /favicon.ico HTTP/1.1[0m" 304 -
2025-05-31 00:17:02,007 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:17:02] "GET /이두원/get_history HTTP/1.1" 200 -
2025-05-31 00:17:03,909 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:17:03] "GET /이두원/get_files?folder=results_1748616642 HTTP/1.1" 200 -
2025-05-31 00:17:18,856 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:17:18] "GET /이두원/get_history HTTP/1.1" 200 -
2025-05-31 00:17:21,607 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:17:21] "DELETE /이두원/delete_folder?folder=results_1748616642 HTTP/1.1" 200 -
2025-05-31 00:17:21,703 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:17:21] "GET /이두원/get_history HTTP/1.1" 200 -
2025-05-31 00:20:29,989 [INFO] __main__:655 - Flask 애플리케이션 초기화 완료
2025-05-31 00:20:29,990 [INFO] werkzeug:97 - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-31 00:20:29,991 [INFO] werkzeug:97 - [33mPress CTRL+C to quit[0m
2025-05-31 00:20:32,265 [INFO] __main__:73 - 사용자 '이두원'가 접속했습니다.
2025-05-31 00:20:32,271 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:20:32] "GET /이두원 HTTP/1.1" 200 -
2025-05-31 00:20:32,306 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:20:32] "[36mGET /static/css/main.css HTTP/1.1[0m" 304 -
2025-05-31 00:20:32,344 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:20:32] "[36mGET /static/js/uiController.js HTTP/1.1[0m" 304 -
2025-05-31 00:20:32,350 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:20:32] "[36mGET /static/js/chartManager.js HTTP/1.1[0m" 304 -
2025-05-31 00:20:32,352 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:20:32] "[36mGET /static/js/dataManager.js HTTP/1.1[0m" 304 -
2025-05-31 00:20:32,352 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:20:32] "[36mGET /static/js/sessionHistory.js HTTP/1.1[0m" 304 -
2025-05-31 00:20:32,353 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:20:32] "[36mGET /static/js/main.js HTTP/1.1[0m" 304 -
2025-05-31 00:20:32,354 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:20:32] "[36mGET /static/js/modalManager.js HTTP/1.1[0m" 304 -
2025-05-31 00:20:32,428 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:20:32] "GET /이두원/get_predefined_queries HTTP/1.1" 200 -
2025-05-31 00:20:32,431 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:20:32] "[36mGET /favicon.ico HTTP/1.1[0m" 304 -
2025-05-31 00:20:33,759 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:20:33] "GET /이두원/get_history HTTP/1.1" 200 -
2025-05-31 00:20:35,620 [INFO] __main__:486 - 폴더 삭제 완료: ./results/이두원/results_1748616642
2025-05-31 00:20:35,620 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:20:35] "DELETE /이두원/delete_folder?folder=results_1748616642 HTTP/1.1" 200 -
2025-05-31 00:20:35,701 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:20:35] "GET /이두원/get_history HTTP/1.1" 200 -
2025-05-31 00:23:16,394 [INFO] llm_manager:83 - API 클라이언트 초기화 완료
2025-05-31 00:23:16,395 [INFO] llm_manager:33 - LLM 매니저 초기화 완료 - 모드: api
2025-05-31 00:23:16,395 [INFO] data_manager:42 - 데이터 로드 중... Rating_Test_Data.csv
2025-05-31 00:23:16,397 [INFO] data_manager:45 - CSV 데이터 로드 완료: 108 행, 12 열
2025-05-31 00:23:16,397 [INFO] data_manager:50 - 메타데이터 로드 중... metadata.json
2025-05-31 00:23:16,398 [INFO] data_manager:54 - 메타데이터 로드 완료
2025-05-31 00:23:16,398 [INFO] data_manager:80 - Oracle 데이터베이스 설정 중...
2025-05-31 00:23:16,419 [INFO] data_manager:89 - Oracle 데이터베이스 연결 성공
2025-05-31 00:23:16,419 [INFO] data_manager:38 - 데이터 관리자 초기화 완료
2025-05-31 00:23:16,419 [INFO] chart_generator:78 - 차트 생성기 초기화 완료
2025-05-31 00:23:16,419 [INFO] main:78 - 차트 생성 애플리케이션 초기화 완료
2025-05-31 00:23:16,419 [INFO] main:90 - 미리 정의된 SQL 실행 시작: 'customer_performance_2024'
2025-05-31 00:23:16,419 [INFO] data_manager:184 - SQL 실행 중: 
                SELECT g.HIQ1_CUST_CD as customer_code,
                       CASE g.HIQ1_CUST_CD 
                           WHEN 'G113' THEN 'GOOGLE'
                           WHEN 'G150' THEN 'APPLE' 
                           WHEN 'G669' THEN 'AMD'
                           WHEN 'G932' THEN 'AMAZON'
                           WHEN 'G118' THEN 'HUAWEI'
                           WHEN 'G010' THEN 'HP INC'
                           WHEN 'G021' THEN 'ACER'
                           WHEN 'G163' THEN 'MICROSOFT'
                           WHEN 'G020' THEN 'DELL'
                           WHEN 'G959' THEN 'XIAOMI'
                           ELSE g.HIQ1_CUST_CD
                       END as customer_name,
                       g.HIQ1_APP_CD as app_type,
                       g.AMT as performance_amount,
                       g.ACTUAL as actual_rating,
                       g.SCORE as performance_score,
                       g.PLAN_QUARTER as quarter
                FROM QMS_GBW_VIEW g
                WHERE g.PLAN_QUARTER LIKE '2024%'
                ORDER BY g.AMT DESC, TO_NUMBER(g.SCORE) DESC
            
2025-05-31 00:23:16,459 [INFO] data_manager:192 - SQL 실행 완료: 21 행, 7 열
2025-05-31 00:23:16,459 [INFO] main:101 - 미리 정의된 SQL 실행 완료: 'customer_performance_2024'
2025-05-31 00:23:16,460 [ERROR] main:141 - 미리 정의된 SQL 결과 저장 중 오류: name 'datetime' is not defined
2025-05-31 00:23:16,462 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:23:16] "POST /이두원/execute_predefined_query HTTP/1.1" 200 -
2025-05-31 00:23:23,943 [INFO] main:90 - 미리 정의된 SQL 실행 시작: 'expected_rating'
2025-05-31 00:23:23,943 [INFO] data_manager:184 - SQL 실행 중: 
                SELECT r.HIQ1_CUST_CD as customer_code,
                       CASE r.HIQ1_CUST_CD 
                           WHEN 'G113' THEN 'GOOGLE'
                           WHEN 'G150' THEN 'APPLE' 
                           WHEN 'G669' THEN 'AMD'
                           WHEN 'G932' THEN 'AMAZON'
                           WHEN 'G118' THEN 'HUAWEI'
                           WHEN 'G010' THEN 'HP INC'
                           WHEN 'G021' THEN 'ACER'
                           WHEN 'G163' THEN 'MICROSOFT'
                           WHEN 'G020' THEN 'DELL'
                           WHEN 'G959' THEN 'XIAOMI'
                           ELSE r.HIQ1_CUST_CD
                       END as customer_name,
                       r.HIQ1_APP_CD as app_type,
                       r.YM_QT as quarter,
                       r.FORECAST as expected_rating,
                       r.REVENUE as revenue_rating,
                       r.EXPECTED_DATE as expected_date
                FROM QMS_RAT_YMQT_N r
                WHERE r.FORECAST IS NOT NULL
                ORDER BY r.EXPECTED_DATE DESC, r.YM_QT DESC
            
2025-05-31 00:23:23,947 [INFO] data_manager:192 - SQL 실행 완료: 48 행, 7 열
2025-05-31 00:23:23,947 [INFO] main:101 - 미리 정의된 SQL 실행 완료: 'expected_rating'
2025-05-31 00:23:23,947 [ERROR] main:141 - 미리 정의된 SQL 결과 저장 중 오류: name 'datetime' is not defined
2025-05-31 00:23:23,950 [INFO] werkzeug:97 - 127.0.0.1 - - [31/May/2025 00:23:23] "POST /이두원/execute_predefined_query HTTP/1.1" 200 -
